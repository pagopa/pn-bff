info:
  version: v1.0
components:
  parameters:

    ############################################################################################
    ###                     PARAMETRI RICERCA NOTIFICHE                                      ###
    ############################################################################################
    BffNotificationSearchStartDate:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchStartDate'

    BffNotificationSearchEndDate:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchEndDate'

    BffNotificationSearchRecipientId:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchRecipientId'

    BffNotificationSearchSenderId:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchSenderId'

    BffNotificationSearchGroup:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchGroup'

    BffNotificationSearchStatus:
      name: status
      in: query
      required: false
      description: stato della notifica
      schema:
        $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/remote-refs.yaml#/components/schemas/NotificationStatus'

    BffNotificationSearchSubject:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchSubject'

    BffSearchIun:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchIun'

    BffNotificationSearchPageSize:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchPageSize'

    BffNotificationSearchNextPagesKey:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchNextPagesKey'

    ############################################################################################
    ###                     PARAMETRI DETTAGLIO NOTIFICA                                     ###
    ############################################################################################
    BffPathIun:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/pathIun'

    BffNotificationSearchMandateId:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/parameters-notification-search.yaml#/components/parameters/notificationSearchMandateId'

    ############################################################################################
    ###                     PARAMETRI DOWLOAD DOCUMENTI NOTIFICA                             ###
    ############################################################################################
    BffQueryMandateId:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/1bb29785f067926d24f19f229a9b9dcdea0ea75b/docs/openapi/api-internal-web-recipient.yaml#/components/parameters/queryMandateId'

    BffQueryDocumentType:
      description: Tipo documento
      name: documentType
      in: query
      required: true
      schema:
        $ref: '#/components/schemas/BffDocumentType'

    BffQueryDocumentId:
      description: Identificativo o indice del documento
      name: documentId
      in: query
      required: true
      # serialize this object as ?key1=value1&key2=value2
      style: form
      explode: true
      schema:
        type: object
        properties:
          aarId:
            type: string
            pattern: ^(safestorage:\/\/)?[A-Za-z0-9._-]+$
            maxLength: 512
          attachmentIdx:
            type: integer
            format: int32
          legalFactId:
            type: string
            pattern: ^[ -~]*$
            maxLength: 1024

    BffQueryLegalFactCategory:
      description: >-
        Tipi di atti opponibili a terzi che Piattaforma Notifiche mette a disposizione dei suoi utenti.
      name: legalFactCategory
      in: query
      required: false
      schema:
        $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery-push/2dfae74710df04b0b4ca855112af536b3e2c7fd1/docs/openapi/schemas-pn-legal-facts.yaml#/components/schemas/LegalFactCategory'

  schemas:
    # this is needed because the openapi generator doesn't work well if we put the content of this schema
    # directly into BffPathDocumentType parameter
    BffDocumentType:
      type: string
      enum:
        - ATTACHMENT
        - LEGAL_FACT
        - AAR