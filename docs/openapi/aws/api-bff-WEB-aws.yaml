openapi: 3.0.1
info:
  title: >-
    ${stageVariables.ProjectName}-${stageVariables.MicroServiceUniqueName}-${stageVariables.IntendedUsage}
  version: ZQxBzxbhDdzrcNJPAYribIw7vZooirPQ9XjzFjh5PFo=
servers:
  - url: https://${stageVariables.DnsName}/{basePath}
    variables:
      basePath:
        default: /${stageVariables.ServiceApiPath}
    x-amazon-apigateway-endpoint-configuration:
      disableExecuteApiEndpoint: true
paths:
  /v1/notifications/sent:
    get:
      summary: 'Mittente: ricerca notifiche inviate'
      description: Questa operazione permette di ricercare le notifiche inviate.
      tags:
        - NotificationSent
      operationId: searchSentNotificationsV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/notificationSearchStartDate'
        - $ref: '#/components/parameters/notificationSearchEndDate'
        - $ref: '#/components/parameters/notificationSearchRecipientId'
        - $ref: '#/components/parameters/BffNotificationSearchStatus'
        - $ref: '#/components/parameters/notificationSearchSubject'
        - $ref: '#/components/parameters/notificationSearchIun'
        - $ref: '#/components/parameters/notificationSearchPageSize'
        - $ref: '#/components/parameters/notificationSearchNextPagesKey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationSearchResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    post:
      summary: Richiesta invio notifica
      description: >-
        Operazione utilizzata dalla Pubblica Amministrazione per richiedere
        l'invio di una notifica.


        La restituzione di uno stato HTTP 202 significa solo che la richiesta è
        sintatticamente

        valida, non che la richiesta sia stata validata ed accettata.
      tags:
        - NotificationSent
      operationId: newSentNotificationV1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BffNewNotificationRequest'
      responses:
        '202':
          description: Accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewNotificationResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Conflict
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/notifications/sent API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/sent/{iun}:
    get:
      summary: 'Mittente: lettura dettagli notifica'
      description: >-
        Questa operazione permette di leggere tutti i dettagli di una notifica
        accettata.
      tags:
        - NotificationSent
      operationId: getSentNotificationV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathIun'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffFullNotificationV1'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.iun: method.request.path.iun
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/notifications/sent/{iun} API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.iun: method.request.path.iun
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/sent/{iun}/documents/{documentType}:
    get:
      summary: >-
        Questa operazione permette di scaricare qualsiasi documento legato alla
        notifica.
      tags:
        - NotificationSent
      operationId: getSentNotificationDocumentV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathIun'
        - $ref: '#/components/parameters/BffPathDocumentType'
        - $ref: '#/components/parameters/BffQueryDocumentIdx'
        - $ref: '#/components/parameters/BffQueryDocumentId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffDocumentDownloadMetadataResponse'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}/documents/{documentType}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.iun: method.request.path.iun
          integration.request.path.documentType: method.request.path.documentType
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: >-
        Options for /v1/notifications/sent/{iun}/documents/{documentType} API
        CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}/documents/{documentType}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.iun: method.request.path.iun
          integration.request.path.documentType: method.request.path.documentType
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/sent/{iun}/payments/{recipientIdx}/{attachmentName}:
    get:
      summary: Download allegato per pagamento
      tags:
        - NotificationSent
      operationId: getSentNotificationPaymentV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathIun'
        - $ref: '#/components/parameters/pathRecipientIdx'
        - $ref: '#/components/parameters/pathAttachmentName'
        - $ref: '#/components/parameters/attachmentIdx'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffDocumentDownloadMetadataResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}/payments/{recipientIdx}/{attachmentName}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.iun: method.request.path.iun
          integration.request.path.recipientIdx: method.request.path.recipientIdx
          integration.request.path.attachmentName: method.request.path.attachmentName
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: >-
        Options for
        /v1/notifications/sent/{iun}/payments/{recipientIdx}/{attachmentName}
        API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}/payments/{recipientIdx}/{attachmentName}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.iun: method.request.path.iun
          integration.request.path.recipientIdx: method.request.path.recipientIdx
          integration.request.path.attachmentName: method.request.path.attachmentName
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/sent/{iun}/cancel:
    put:
      summary: 'Mittente: annullamento notifica'
      description: Questa operazione permette di annullare una notifica inviata.
      tags:
        - NotificationSent
      operationId: notificationCancellationV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathIun'
      responses:
        '202':
          description: Accepted - Richiesta annullamento presa in carico
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestStatus'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}/cancel
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.iun: method.request.path.iun
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/notifications/sent/{iun}/cancel API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/{iun}/cancel
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.iun: method.request.path.iun
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/sent/documents/preload:
    post:
      summary: Richiesta di pre-caricamento dei documenti della notifica
      description: >-
        Operazione che richiede a Piattaforma Notifica le informazioni e le
        autorizzazioni necessarie  a pre-caricare uno o più file da allegare a
        una notifica.
      tags:
        - NotificationSent
      operationId: preSignedUploadV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/PreLoadRequest'
              minItems: 1
              maxItems: 15
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PreLoadResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/documents/preload
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/notifications/sent/documents/preload API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/sent/documents/preload
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/received:
    get:
      summary: 'Destinatario: ricerca notifiche ricevute'
      description: Questa operazione permette di ricercare le notifiche ricevute.
      tags:
        - NotificationReceived
      operationId: searchReceivedNotificationsV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/notificationSearchStartDate'
        - $ref: '#/components/parameters/notificationSearchEndDate'
        - $ref: '#/components/parameters/notificationSearchMandateId'
        - $ref: '#/components/parameters/notificationSearchSenderId'
        - $ref: '#/components/parameters/BffNotificationSearchStatus'
        - $ref: '#/components/parameters/notificationSearchSubject'
        - $ref: '#/components/parameters/notificationSearchIun'
        - $ref: '#/components/parameters/notificationSearchPageSize'
        - $ref: '#/components/parameters/notificationSearchNextPagesKey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationSearchResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/notifications/received API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/received/delegated:
    get:
      summary: 'Destinatario: ricerca notifiche delegate ricevute'
      description: Questa operazione permette di ricercare le notifiche delegate ricevute.
      tags:
        - NotificationReceived
      operationId: searchReceivedDelegatedNotificationsV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/notificationSearchStartDate'
        - $ref: '#/components/parameters/notificationSearchEndDate'
        - $ref: '#/components/parameters/notificationSearchSenderId'
        - $ref: '#/components/parameters/notificationSearchRecipientId'
        - $ref: '#/components/parameters/notificationSearchGroup'
        - $ref: '#/components/parameters/BffNotificationSearchStatus'
        - $ref: '#/components/parameters/notificationSearchIun'
        - $ref: '#/components/parameters/notificationSearchPageSize'
        - $ref: '#/components/parameters/notificationSearchNextPagesKey'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationSearchResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/delegated
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/notifications/received/delegated API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/delegated
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/received/{iun}:
    get:
      summary: Accesso notifiche ricevute
      description: >-
        Utilizzato da Persone Fisiche e Persone Giuridiche per accedere ai
        dettagli delle  notifiche ricevute.
      tags:
        - NotificationReceived
      operationId: getReceivedNotificationV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathIun'
        - $ref: '#/components/parameters/notificationSearchMandateId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffFullNotificationV1'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/{iun}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.iun: method.request.path.iun
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/notifications/received/{iun} API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/{iun}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.iun: method.request.path.iun
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/received/{iun}/documents/{documentType}:
    get:
      summary: >-
        Questa operazione permette di scaricare qualsiasi documento legato alla
        notifica.
      tags:
        - NotificationReceived
      operationId: getReceivedNotificationDocumentV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathIun'
        - $ref: '#/components/parameters/BffPathDocumentType'
        - $ref: '#/components/parameters/queryMandateId'
        - $ref: '#/components/parameters/BffQueryDocumentIdx'
        - $ref: '#/components/parameters/BffQueryDocumentId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffDocumentDownloadMetadataResponse'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/{iun}/documents/{documentType}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.iun: method.request.path.iun
          integration.request.path.documentType: method.request.path.documentType
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: >-
        Options for /v1/notifications/received/{iun}/documents/{documentType}
        API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/{iun}/documents/{documentType}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.iun: method.request.path.iun
          integration.request.path.documentType: method.request.path.documentType
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/received/{iun}/payments/{attachmentName}:
    get:
      summary: Download allegato per pagamento
      tags:
        - NotificationReceived
      operationId: getReceivedNotificationPaymentV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathIun'
        - $ref: '#/components/parameters/pathAttachmentName'
        - $ref: '#/components/parameters/queryMandateId'
        - $ref: '#/components/parameters/attachmentIdx'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffDocumentDownloadMetadataResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/{iun}/payments/{attachmentName}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.iun: method.request.path.iun
          integration.request.path.attachmentName: method.request.path.attachmentName
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: >-
        Options for /v1/notifications/received/{iun}/payments/{attachmentName}
        API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/{iun}/payments/{attachmentName}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.iun: method.request.path.iun
          integration.request.path.attachmentName: method.request.path.attachmentName
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/notifications/received/check-aar-qr-code:
    post:
      summary: Servizio per la verifica del aar-qr-code
      tags:
        - NotificationReceived
      operationId: checkAarQrCodeV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestCheckAarMandateDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseCheckAarMandateDto'
        '404':
          description: QrCode reference Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/check-aar-qr-code
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/notifications/received/check-aar-qr-code API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/notifications/received/check-aar-qr-code
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/api-keys:
    get:
      summary: Ricerca api keys
      description: servizio di consultazione della lista delle api keys
      tags:
        - ApiKeys
      operationId: getApiKeysV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - name: limit
          in: query
          schema:
            type: number
            default: 10
        - name: lastKey
          in: query
          required: false
          schema:
            type: string
        - name: lastUpdate
          in: query
          required: false
          schema:
            type: string
        - name: showVirtualKey
          in: query
          required: false
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffApiKeysResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/api-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    post:
      summary: Creazione api key
      description: servizio di creazione di un'api key
      tags:
        - ApiKeys
      operationId: newApiKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestNewApiKey'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseNewApiKey'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/api-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/api-keys API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/api-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/api-keys/{id}:
    delete:
      summary: Rimozione api key
      description: servizio di rimozione dell'api key
      tags:
        - ApiKeys
      operationId: deleteApiKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathApiKey'
      responses:
        '200':
          description: OK
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition (i.e. delete an enabled key)
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/api-keys/{id}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.id: method.request.path.id
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/api-keys/{id} API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/api-keys/{id}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.id: method.request.path.id
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/api-keys/{id}/status:
    put:
      summary: Cambia lo stato dell'api key
      description: servizio di cambio stato dell'api key
      tags:
        - ApiKeys
      operationId: changeStatusApiKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathApiKey'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestApiKeyStatus'
        required: true
      responses:
        '200':
          description: OK
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition (i.e. enable an enabled key)
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/api-keys/{id}/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.id: method.request.path.id
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/api-keys/{id}/status API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/api-keys/{id}/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.id: method.request.path.id
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/public-keys:
    get:
      summary: Ricerca public keys
      description: servizio di consultazione della lista delle public keys
      tags:
        - PublicKeys
      operationId: getPublicKeysV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - name: limit
          in: query
          schema:
            type: number
            default: 10
        - name: lastKey
          in: query
          required: false
          schema:
            type: string
        - name: createdAt
          in: query
          required: false
          schema:
            type: string
        - name: showPublicKey
          in: query
          required: false
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicKeysResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    post:
      summary: Censimento public key
      description: servizio di censimento di una public key
      tags:
        - PublicKeys
      operationId: newPublicKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PublicKeyRequest'
        required: true
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicKeyResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/pg/public-keys API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/public-keys/{kid}:
    delete:
      summary: Rimozione public key
      description: servizio di rimozione della public key identificata tramite kid
      tags:
        - PublicKeys
      operationId: deletePublicKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathKid'
      responses:
        '204':
          description: No content
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition (i.e. delete an enabled key)
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/{kid}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pg/public-keys/{kid} API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/{kid}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/public-keys/{kid}/status:
    put:
      summary: Blocco/Riattivazione public key
      description: >-
        servizio di blocco/riattivazione della public key identificata tramite
        kid
      tags:
        - PublicKeys
      operationId: changeStatusPublicKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathKid'
        - $ref: '#/components/parameters/queryStatus'
      responses:
        '204':
          description: No content
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition (i.e. enable an enabled key)
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/{kid}/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pg/public-keys/{kid}/status API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/{kid}/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/public-keys/{kid}/rotate:
    post:
      summary: Rotazione public key
      description: servizio di rotazione della public key identificata tramite kid
      tags:
        - PublicKeys
      operationId: rotatePublicKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathKid'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PublicKeyRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicKeyResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition (i.e. enable an enabled key)
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/{kid}/rotate
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pg/public-keys/{kid}/rotate API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/{kid}/rotate
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/public-keys/check-issuer:
    get:
      summary: Verifica esistenza issuer e accettazione tos
      description: Servizio di verifica esistenza issuer e accettazione tos
      tags:
        - PublicKeys
      operationId: checkIssuerPublicKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffPublicKeysCheckIssuerResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/check-issuer
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/pg/public-keys/check-issuer API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/public-keys/check-issuer
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/virtual-keys:
    get:
      summary: Visualizzazione virtual keys
      description: Servizio di consultazione della lista delle virtual keys censite.
      tags:
        - VirtualKeys
      operationId: getVirtualKeysV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - name: limit
          in: query
          schema:
            type: number
            default: 10
        - name: lastKey
          in: query
          required: false
          schema:
            type: string
        - name: lastUpdate
          in: query
          required: false
          schema:
            type: string
        - name: showVirtualKey
          in: query
          required: false
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VirtualKeysResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/virtual-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    post:
      summary: Censimento virtual key
      description: Servizio di creazione di una nuova virtual key.
      tags:
        - VirtualKeys
      operationId: newVirtualKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestNewVirtualKey'
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseNewVirtualKey'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/virtual-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/pg/virtual-keys API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/virtual-keys
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/virtual-keys/{kid}:
    delete:
      summary: Eliminazione virtual key
      description: Servizio di eliminazione di una virtual key.
      tags:
        - VirtualKeys
      operationId: deleteVirtualKeyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathKid'
      responses:
        '200':
          description: OK
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/virtual-keys/{kid}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pg/virtual-keys/{kid} API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/virtual-keys/{kid}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/virtual-keys/{kid}/status:
    put:
      summary: Cambia lo stato della virtualKey
      description: servizio di cambio stato della virtualKey
      tags:
        - VirtualKeys
      operationId: changeStatusVirtualKeysV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/pathKid'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestVirtualKeyStatus'
        required: true
      responses:
        '200':
          description: OK
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          description: Wrong state transition (i.e. enable an enabled key)
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/virtual-keys/{kid}/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pg/virtual-keys/{kid}/status API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/virtual-keys/{kid}/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.kid: method.request.path.kid
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/institutions:
    get:
      summary: Get Institutions list
      description: This operation retrieves the institutions from Self Care.
      operationId: getInstitutionsV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      tags:
        - InfoPa
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffInstitutionList'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal server error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/institutions
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/institutions API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/institutions
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/institutions/products:
    get:
      summary: Get Products list of an Institution
      description: >-
        This operation retrieves all active products associated with the
        specified institution and user.
      operationId: getInstitutionProductsV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      tags:
        - InfoPa
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffInstitutionProductList'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal server error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/institutions/products
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/institutions/products API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/institutions/products
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pa/groups:
    get:
      summary: Get PA Groups list
      description: This operation retrieves the groups from Self Care.
      operationId: getPAGroupsV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      tags:
        - InfoPa
      parameters:
        - name: status
          description: Se valorizzato indica di tornare solo i gruppi nello stato passato
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/PaGroupStatus'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffPaGroupList'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pa/groups
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pa/groups API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pa/groups
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pa/additional-languages:
    get:
      description: Retrieve the additional language chosen by pa
      operationId: getAdditionalLang
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      tags:
        - InfoPa
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffAdditionalLanguages'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pa/additional-languages
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    put:
      description: Update the additional language chosen by pa
      operationId: changeAdditionalLang
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      tags:
        - InfoPa
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BffAdditionalLanguages'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffAdditionalLanguages'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pa/additional-languages
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/pa/additional-languages API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pa/additional-languages
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/groups:
    get:
      summary: Get PG Groups list
      description: This operation retrieves the PG Groups from Self Care.
      operationId: getPGGroupsV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      tags:
        - InfoRecipient
      parameters:
        - name: status
          description: Se valorizzato indica di tornare solo i gruppi nello stato passato
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/PgGroupStatus'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffPgGroupList'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal server error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/groups
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pg/groups API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/groups
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pa-list:
    get:
      summary: Get PA list
      description: This operation retrieves the list of PA that use PN
      operationId: getPAListV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      tags:
        - InfoRecipient
      parameters:
        - name: paNameFilter
          description: Se valorizzato indica il prefisso della denominazione della PA
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/PaNameFilter'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaSummariesList'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pa-list
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/pa-list API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pa-list
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v2/tos-privacy:
    get:
      summary: Accettazione TOS e Privacy
      description: Ritorna lo stato di accettazione dei TOS e della Privacy.
      tags:
        - UserConsents
      operationId: getTosPrivacyV2
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffQueryTosPrivacyType'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffTosPrivacyConsent'
        '400':
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v2/tos-privacy
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    put:
      summary: Accettazione TOS e Privacy
      description: Permette di accettare i TOS e la Privacy.
      tags:
        - UserConsents
      operationId: acceptTosPrivacyV2
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BffTosPrivacyBody'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v2/tos-privacy
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v2/tos-privacy API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v2/tos-privacy
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/pg/tos-privacy:
    get:
      summary: Accettazione Pg TOS e Privacy
      description: Ritorna lo stato di accettazione dei TOS e della Privacy della Pg.
      tags:
        - UserConsents
      operationId: getPgTosPrivacyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffQueryTosPrivacyType'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffTosPrivacyConsent'
        '400':
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/tos-privacy
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    put:
      summary: Accettazione Pg TOS e Privacy
      description: Permette di accettare i TOS e la Privacy della Pg.
      tags:
        - UserConsents
      operationId: acceptPgTosPrivacyV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BffTosPrivacyBody'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/tos-privacy
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/pg/tos-privacy API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/pg/tos-privacy
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/downtime/status:
    get:
      summary: Stato attuale
      description: >-
        Metodo che restituisce l'elenco delle funzionalità di Piattaforma
        Notifiche e l'elenco dei disservizi presenti al momento
        dell'invocazione.
      tags:
        - Downtime
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      operationId: getCurrentStatusV1
      x-api-permissions:
        - api-key-read
        - log-downtime-read
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffPnStatusResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/downtime/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/downtime/status API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/downtime/status
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/downtime/history:
    get:
      summary: Ricerca storico disservizi
      description: >-
        Elenco dei disservizi di Piattafoma Notifiche riscontrate nel lasso di
        tempo specificato  dai parametri _fromTime_ e _toTime_. <br/> Il
        parametro _functionality_ è opzionale e ripetibile; permette di filtrare
        i disservizi  estratti limitandoli a quelli impattanti le funzionalità
        elencate.
      tags:
        - Downtime
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      operationId: getStatusHistoryV1
      x-api-permissions:
        - api-key-read
        - log-downtime-read
      parameters:
        - $ref: '#/components/parameters/BffQueryFromTime'
        - $ref: '#/components/parameters/queryToTime'
        - $ref: '#/components/parameters/queryPage'
        - $ref: '#/components/parameters/querySize'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PnDowntimeHistoryResponse'
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/downtime/history
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/downtime/history API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/downtime/history
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/downtime/legal-facts/{legalFactId}:
    get:
      summary: Ottieni atto opponibile a terzi
      description: >-
        Fornisce le informazioni per scaricare un atto opponibile a terzi o, se
        tale atto va  recuperato dagli archivi, fornisce una stima per eccesso
        di quanti secondi bisogna  attendere.
      tags:
        - Downtime
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      operationId: getLegalFactV1
      x-api-permissions:
        - api-key-read
        - log-downtime-read
      parameters:
        - name: legalFactId
          in: path
          required: true
          description: Identificativo dell'atto opponibile a terzi che si vuole scaricare
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LegalFactDownloadMetadataResponse'
        '204':
          description: Not signed
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/downtime/legal-facts/{legalFactId}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.legalFactId: method.request.path.legalFactId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/downtime/legal-facts/{legalFactId} API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/downtime/legal-facts/{legalFactId}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.legalFactId: method.request.path.legalFactId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/payments/info:
    post:
      summary: Retrieve payment information given a list of payments identifiers
      tags:
        - Payments
      operationId: getPaymentsInfoV1
      x-pagopa-monitoring-group: payment-payments
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentInfoRequests'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffPaymentInfoResponse'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/payments/info
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/payments/info API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/payments/info
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/payments/cart:
    post:
      summary: Make a payment by calling the Checkout API
      tags:
        - Payments
      operationId: paymentsCartV1
      x-pagopa-monitoring-group: payment-payments
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentResponse'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '422':
          description: Unprocessable Entity
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/payments/cart
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/payments/cart API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/payments/cart
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/addresses:
    get:
      summary: Recapiti
      description: Restituisce i recapiti dell'utente
      tags:
        - Addresses
      operationId: getAddressesV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffUserAddresses'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/addresses
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/addresses API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/addresses
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/addresses/{addressType}/{senderId}/{channelType}:
    post:
      summary: Creazione/Aggiornamento Recapito
      description: Creazione o aggiornamento di un recapito legale o di cortesia
      tags:
        - Addresses
      operationId: createOrUpdateAddressV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      x-pagopa-pn-custom-throttling-group: recapiti-by-cx-id
      x-pagopa-pn-custom-throttling-value: context.authorizer.cx_id
      parameters:
        - name: addressType
          in: path
          description: Address type
          required: true
          schema:
            $ref: '#/components/schemas/BffAddressType'
        - $ref: '#/components/parameters/senderId'
        - in: path
          name: channelType
          description: Communication Channel type
          required: true
          schema:
            $ref: '#/components/schemas/BffChannelType'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressVerification'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddressVerificationResponse'
          description: |
            Nell'oggetto c'è la motivazione di quanto richiesto per procedere
        '204':
          description: successful operation
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '422':
          description: >
            This error is caused by one of this events: * Verification code
            failure: error.detail equals to
            PN_USERATTRIBUTES_INVALIDVERIFICATIONCODE * Verification code max
            attempt reached: error.detail equals to
            PN_USERATTRIBUTES_RETRYLIMITVERIFICATIONCODE * Verification code
            expired/notfound: error.detail equals to
            PN_USERATTRIBUTES_EXPIREDVERIFICATIONCODE
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/addresses/{addressType}/{senderId}/{channelType}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.header.x-pagopa-pn-custom-throttling-group: '''recapiti-by-cx-id'''
          integration.request.header.x-pagopa-pn-custom-throttling-value: context.authorizer.cx_id
          integration.request.path.addressType: method.request.path.addressType
          integration.request.path.senderId: method.request.path.senderId
          integration.request.path.channelType: method.request.path.channelType
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    delete:
      summary: Eliminazione Recapito
      description: Eliminazione di un recapito legale o di cortesia
      tags:
        - Addresses
      operationId: deleteAddressV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - name: addressType
          in: path
          description: Address type
          required: true
          schema:
            $ref: '#/components/schemas/BffAddressType'
        - $ref: '#/components/parameters/senderId'
        - in: path
          name: channelType
          description: Communication Channel type
          required: true
          schema:
            $ref: '#/components/schemas/BffChannelType'
      responses:
        '204':
          description: OK
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Digital Address not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/addresses/{addressType}/{senderId}/{channelType}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.addressType: method.request.path.addressType
          integration.request.path.senderId: method.request.path.senderId
          integration.request.path.channelType: method.request.path.channelType
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: >-
        Options for /v1/addresses/{addressType}/{senderId}/{channelType} API
        CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/addresses/{addressType}/{senderId}/{channelType}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.addressType: method.request.path.addressType
          integration.request.path.senderId: method.request.path.senderId
          integration.request.path.channelType: method.request.path.channelType
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate/delegate/count:
    get:
      summary: >-
        Ritorna il numero totale di deleghe in base al filtro stato (se
        specificato). Se non è presente nessun filtro, sono ritornate tutte le
        deleghe attive e pending
      tags:
        - Mandate
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      operationId: countMandatesByDelegateV1
      parameters:
        - $ref: '#/components/parameters/BffQueryStatus'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MandateCountsDto'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/delegate/count
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/mandate/delegate/count API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/delegate/count
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate:
    post:
      summary: Create a new mandate, returns the just created mandate if successful
      tags:
        - Mandate
      operationId: createMandateV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BffNewMandateRequest'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/mandate API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate/{mandateId}/accept:
    patch:
      summary: Accept a mandate
      tags:
        - Mandate
      operationId: acceptMandateV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffPathMandateId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcceptRequestDto'
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/accept
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/mandate/{mandateId}/accept API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/accept
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate/{mandateId}/update:
    patch:
      summary: Update a mandate
      tags:
        - Mandate
      operationId: updateMandateV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffPathMandateId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRequestDto'
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/update
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/mandate/{mandateId}/update API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/update
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate/{mandateId}/reject:
    patch:
      summary: Reject a mandate
      tags:
        - Mandate
      operationId: rejectMandateV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffPathMandateId'
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/reject
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/mandate/{mandateId}/reject API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/reject
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate/{mandateId}/revoke:
    patch:
      summary: Revoke a mandate
      tags:
        - Mandate
      operationId: revokeMandateV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffPathMandateId'
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/revoke
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/mandate/{mandateId}/revoke API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/{mandateId}/revoke
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.mandateId: method.request.path.mandateId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate/delegate:
    get:
      summary: >-
        Ritorna la lista delle deleghe a carico in base al filtro per stato (se
        specificato). Se non è presente nessun filtro, sono ritornate tutte le
        deleghe attive e pending
      tags:
        - Mandate
      operationId: getMandatesByDelegateV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffQueryStatus'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MandateDto'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/delegate
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    post:
      summary: >-
        Ritorna la lista delle deleghe a carico in base ai filtri per stato,
        gruppo/i e delegante (taxId)
      tags:
        - Mandate
      operationId: searchMandatesByDelegateV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      parameters:
        - $ref: '#/components/parameters/BffQuerySize'
        - $ref: '#/components/parameters/BffQueryNextPageKey'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchMandateRequestDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchMandateResponseDto'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/delegate
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: Options for /v1/mandate/delegate API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/delegate
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/mandate/delegator:
    get:
      summary: Ritorna tutte le deleghe create
      tags:
        - Mandate
      operationId: getMandatesByDelegatorV1
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MandateDto'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/delegator
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
      parameters: []
    options:
      operationId: Options for /v1/mandate/delegator API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/mandate/delegator
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters: {}
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
  /v1/sender-dashboard/dashboard-data-request/{cxType}/{cxId}:
    get:
      summary: recupero dati per dashboard mittenti
      description: servizio per il recupero dei dati per dashboard mittenti
      tags:
        - SenderDashboard
      operationId: getDashboardDataV1
      parameters:
        - $ref: '#/components/parameters/BffSenderDashboardPathCxType'
        - $ref: '#/components/parameters/BffSenderDashboardPathCxId'
        - $ref: '#/components/parameters/BffSenderDashboardQueryStartDate'
        - $ref: '#/components/parameters/BffSenderDashboardQueryEndDate'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BffSenderDashboardDataResponse'
        '400':
          description: Invalid input
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      security:
        - pn-auth-fleet_jwtAuthorizer_openapi: []
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/sender-dashboard/dashboard-data-request/{cxType}/{cxId}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.header.x-pagopa-pn-cx-id: context.authorizer.cx_id
          integration.request.header.x-pagopa-pn-cx-role: context.authorizer.cx_role
          integration.request.header.x-pagopa-pn-uid: context.authorizer.uid
          integration.request.header.x-pagopa-pn-jti: context.authorizer.cx_jti
          integration.request.header.x-pagopa-pn-cx-type: context.authorizer.cx_type
          integration.request.header.x-pagopa-pn-cx-groups: context.authorizer.cx_groups
          integration.request.header.x-pagopa-pn-src-ch-details: context.authorizer.sourceChannelDetails
          integration.request.header.x-pagopa-pn-src-ch: '''WEB'''
          integration.request.path.cxType: method.request.path.cxType
          integration.request.path.cxId: method.request.path.cxId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
    options:
      operationId: >-
        Options for /v1/sender-dashboard/dashboard-data-request/{cxType}/{cxId}
        API CORS
      x-amazon-apigateway-integration:
        uri: >-
          http://${stageVariables.ApplicationLoadBalancerDomain}:8080/${stageVariables.ServiceApiPath}/v1/sender-dashboard/dashboard-data-request/{cxType}/{cxId}
        connectionId: ${stageVariables.NetworkLoadBalancerLink}
        httpMethod: ANY
        requestParameters:
          integration.request.path.cxType: method.request.path.cxType
          integration.request.path.cxId: method.request.path.cxId
        passthroughBehavior: when_no_match
        connectionType: VPC_LINK
        timeoutInMillis: 29000
        type: http_proxy
components:
  parameters:
    notificationSearchStartDate:
      name: startDate
      in: query
      required: true
      description: data/ora di inizio dell'intervallo entro cui eseguire la ricerca
      schema:
        type: string
        format: date-time
    notificationSearchEndDate:
      name: endDate
      in: query
      required: true
      description: data/ora di fine dell'intervallo entro cui eseguire la ricerca
      schema:
        type: string
        format: date-time
    notificationSearchRecipientId:
      name: recipientId
      in: query
      required: false
      description: identificativo del destinatario
      schema:
        type: string
        x-field-extra-annotation: '@lombok.ToString.Exclude'
    BffNotificationSearchStatus:
      name: status
      in: query
      required: false
      description: stato della notifica
      schema:
        $ref: '#/components/schemas/NotificationStatusV26'
    notificationSearchSubject:
      name: subjectRegExp
      description: >-
        Regular expression usata, se presente, per filtrare i risultati in base
        al subject  delle notifiche.
      in: query
      required: false
      schema:
        type: string
    notificationSearchIun:
      name: iunMatch
      description: >-
        Se presente indica che lo IUN dei risultati deve essere uguale al valore
        di questo parametro.
      in: query
      required: false
      schema:
        type: string
    notificationSearchPageSize:
      name: size
      description: dimensione della pagina di risultati
      in: query
      required: false
      schema:
        type: number
        maximum: 50
    notificationSearchNextPagesKey:
      name: nextPagesKey
      description: >-
        Chiave indicante la pagina di risultati, da specificare solo se si vuole
        una pagina  diversa dalla prima.
      in: query
      required: false
      schema:
        type: string
    pathIun:
      description: Identificativo Univoco Notifica
      name: iun
      in: path
      required: true
      schema:
        type: string
        minLength: 25
        maxLength: 25
        pattern: ^[A-Z]{4}-[A-Z]{4}-[A-Z]{4}-[0-9]{6}-[A-Z]{1}-[0-9]{1}$
    BffPathDocumentType:
      description: Tipo documento
      name: documentType
      in: path
      required: true
      schema:
        $ref: '#/components/schemas/BffDocumentType'
    BffQueryDocumentIdx:
      description: Indice del documento
      name: documentIdx
      in: query
      required: false
      schema:
        type: number
    BffQueryDocumentId:
      description: Identificativo del documento
      name: documentId
      in: query
      required: false
      schema:
        type: string
        pattern: ^(?:safestorage:\/\/)?[A-Za-z0-9._-]+$
        maxLength: 1024
    pathRecipientIdx:
      name: recipientIdx
      description: indice del destinatario nella lista partendo da 0.
      in: path
      required: true
      schema:
        type: number
    pathAttachmentName:
      name: attachmentName
      description: >-
        Tipologia del pagamento allegato alla notifica. Valori possibili
        PAGOPA|F24
      in: path
      required: true
      schema:
        type: string
        minLength: 3
        maxLength: 6
        pattern: PAGOPA|F24
    attachmentIdx:
      in: query
      name: attachmentIdx
      description: indice del documento di pagamento partendo da 0
      required: false
      schema:
        type: number
    notificationSearchMandateId:
      name: mandateId
      in: query
      required: false
      description: identificativo della delega
      schema:
        type: string
    notificationSearchSenderId:
      name: senderId
      in: query
      required: false
      description: identificativo del mittente
      schema:
        type: string
    notificationSearchGroup:
      name: group
      in: query
      required: false
      description: Gruppo da utilizzare nella query come filtro
      schema:
        type: string
    queryMandateId:
      name: mandateId
      in: query
      required: false
      schema:
        type: string
        format: uuid
    pathApiKey:
      description: Identificativo univoco dell'api key
      name: id
      in: path
      required: true
      schema:
        type: string
    pathKid:
      description: Identificativo univoco della chiave (pubblica o virtuale)
      name: kid
      in: path
      required: true
      schema:
        type: string
    queryStatus:
      description: Action per il cambio stato di una public key
      name: status
      in: query
      required: true
      schema:
        type: string
        enum:
          - BLOCK
          - ENABLE
    BffQueryTosPrivacyType:
      name: type
      description: Tipo di consent
      required: true
      explode: true
      in: query
      schema:
        type: array
        items:
          $ref: '#/components/schemas/ConsentType'
    BffQueryFromTime:
      name: fromTime
      in: query
      required: false
      description: data/ora di inizio dell'intervallo entro cui eseguire la ricerca
      schema:
        type: string
        format: date-time
    queryToTime:
      name: toTime
      in: query
      required: false
      description: data/ora di fine dell'intervallo entro cui eseguire la ricerca
      schema:
        type: string
        format: date-time
    queryPage:
      name: page
      in: query
      required: false
      description: Pagina di risultati a cui il client è interessato
      schema:
        type: string
    querySize:
      name: size
      in: query
      required: false
      description: Size della pagina di risultati a cui il client è interessato
      schema:
        type: string
    senderId:
      in: path
      name: senderId
      description: sender Id o 'default' per indirizzi generali non associati a un mittente
      example: default
      required: true
      schema:
        type: string
        maxLength: 50
        pattern: ^[ -~ ]*$
    BffQueryStatus:
      description: Stato della delega
      name: status
      in: query
      schema:
        type: string
        enum:
          - pending
          - active
          - revoked
          - rejected
          - expired
    BffPathMandateId:
      name: mandateId
      in: path
      required: true
      schema:
        type: string
        maxLength: 36
        pattern: >-
          ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
    BffQuerySize:
      name: size
      in: query
      required: true
      schema:
        type: number
        maximum: 50
    BffQueryNextPageKey:
      name: nextPageKey
      in: query
      schema:
        type: string
        maxLength: 4096
        pattern: ^[ -~ ]*$
    BffSenderDashboardPathCxType:
      name: cxType
      in: path
      description: Customer/Receiver Type
      required: true
      schema:
        type: string
        enum:
          - PA
          - PF
          - PG
    BffSenderDashboardPathCxId:
      name: cxId
      in: path
      description: Customer/Receiver Identifier
      required: true
      schema:
        type: string
        pattern: ^[ -~]*$
        maxLength: 64
    BffSenderDashboardQueryStartDate:
      name: startDate
      in: query
      description: YYYY-MM-DD search start date
      required: false
      schema:
        type: string
        format: date
        example: '2023-12-06'
    BffSenderDashboardQueryEndDate:
      name: endDate
      in: query
      description: YYYY-MM-DD search end date (included)
      required: false
      schema:
        type: string
        format: date
        example: '2023-12-06'
  schemas:
    NotificationStatusV26:
      type: string
      description: |
        stato di avanzamento del processo di notifica:
          * `IN_VALIDATION` - notifica depositata in attesa di validazione
          * `ACCEPTED` - L'ente ha depositato la notifica con successo
          * `REFUSED` - Notifica rifiutata a seguito della validazione
          * `DELIVERING` - L'invio della notifica è in corso
          * `DELIVERED` - La notifica è stata consegnata a tutti i destinatari
          * `VIEWED` - Il destinatario ha letto la notifica entro il termine stabilito
          * `EFFECTIVE_DATE` - Il destinatario non ha letto la notifica entro il termine stabilito
          * `UNREACHABLE` - Il destinatario non è reperibile
          * `CANCELLED` - L'ente ha annullato l'invio della notifica
          * `PAID` - [DEPRECATO] Uno dei destinatari ha pagato la notifica
          * `RETURNED_TO_SENDER` - La notifica è stata restituita al mittente
      enum:
        - IN_VALIDATION
        - ACCEPTED
        - REFUSED
        - DELIVERING
        - DELIVERED
        - VIEWED
        - EFFECTIVE_DATE
        - PAID
        - UNREACHABLE
        - CANCELLED
        - RETURNED_TO_SENDER
    IUN:
      description: Identificativo Univoco Notifica
      type: string
      minLength: 25
      maxLength: 25
      pattern: ^[A-Z]{4}-[A-Z]{4}-[A-Z]{4}-[0-9]{6}-[A-Z]{1}-[0-9]{1}$
    NotificationSearchRow:
      type: object
      properties:
        iun:
          $ref: '#/components/schemas/IUN'
        paProtocolNumber:
          type: string
          description: Numero protocollo associato alla notifica da parte della PA
        sender:
          type: string
          description: Denominazione della PA che ha inviato l'atto.
        sentAt:
          type: string
          description: Data spedizione notifica
          format: date-time
        subject:
          type: string
          description: Oggetto della notifica
        notificationStatus:
          $ref: '#/components/schemas/NotificationStatusV26'
        recipients:
          description: >-
            Elenco delle denominazioni dei destinatari della notifica. <br/>
            __N.B:__ campo da utilizzare solo per visualizzazione.
          type: array
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          items:
            type: string
        requestAcceptedAt:
          description: Data accettazione notifica
          type: string
          format: date-time
        group:
          type: string
          description: Gruppo di utenti dell'ente mittente che può visualizzare la notifica
          pattern: ^[ -~]*$
          maxLength: 1024
        mandateId:
          type: string
          description: Id delega (per notifiche delegate)
    NotificationSearchResponse:
      title: Elenco di notifiche
      description: >-
        Dto contenente i risultati di una ricerca di notifiche. Ogni risposta
        conterrà solo  una pagina di risultati relativi a una ricerca e le
        indicazioni per raggiungere alcune pagine successive.
      type: object
      properties:
        resultsPage:
          description: Una pagina di risultati della query
          type: array
          items:
            $ref: '#/components/schemas/NotificationSearchRow'
        moreResult:
          description: Indica se sono presenti ulteriori pagine di risultati
          type: boolean
        nextPagesKey:
          description: >-
            Elenco, non esaustivo, delle chiavi da usare per richiedere le 
            pagine di risultati successive a quella corrente. <br/> Valorizzato
            solo se il campo __moreResult__ ha valore __true__.
          type: array
          items:
            type: string
    ProblemError:
      properties:
        code:
          description: Internal code of the error, in human-readable format
          example: >-
            PN_PARAMETER_TOO_LONG | PN_PARAMETER_TOO_SHORT | PN_DUPLICATE_ENTRY
            | etc...
          type: string
        element:
          description: Parameter or request body field name for validation error
          example: body.order.item[2].quantity
          type: string
        detail:
          description: >-
            A human readable explanation specific to this occurrence of the
            problem.
          example: Parameter not valid
          maxLength: 1024
          type: string
      required:
        - code
    Problem:
      properties:
        type:
          description: URI reference of type definition
          type: string
        status:
          description: >-
            The HTTP status code generated by the origin server for this
            occurrence of the problem.
          type: number
          example: 503
          maximum: 600
          minimum: 100
          exclusiveMaximum: true
        title:
          description: >-
            A short, summary of the problem type. Written in english and
            readable
          example: Service Unavailable
          maxLength: 64
          pattern: ^[ -~]{0,64}$
          type: string
        detail:
          description: A human readable explanation of the problem.
          example: Request took too long to complete.
          maxLength: 4096
          pattern: ^.{0,4096}$
          type: string
        traceId:
          description: Internal support identifier associated to error
          example: 123e4567-e89b-12d3-a456-426614174000
          type: string
        timestamp:
          description: date and time referred to UTC
          example: '2022-07-27T12:22:33.444Z'
          type: string
          format: date-time
        errors:
          type: array
          minItems: 1
          items:
            $ref: '#/components/schemas/ProblemError'
      required:
        - status
        - errors
    TaxId:
      description: C.F. persona fisica o persona giuridica
      type: string
      x-field-extra-annotation: '@lombok.ToString.Exclude'
      minLength: 11
      maxLength: 16
      pattern: >-
        ^([A-Z]{6}[0-9LMNPQRSTUV]{2}[A-Z]{1}[0-9LMNPQRSTUV]{2}[A-Z]{1}[0-9LMNPQRSTUV]{3}[A-Z]{1})|([0-9]{11})$
    Denomination:
      description: >-
        Denominazione ente o persona fisica / ragione sociale. La codifica
        prevede i caratteri ISO LATIN 1, senza | e senza i caratteri di
        controllo, ovvero la seguente regexp: ^[ -{}~\u00A0-ÿ]*$
      type: string
      x-field-extra-annotation: '@lombok.ToString.Exclude'
      minLength: 1
      pattern: ^.*$
    NotificationDigitalAddress:
      description: Indirizzo di invio della notifica
      required:
        - address
        - type
      type: object
      properties:
        type:
          type: string
          description: tipo di indirizzo PEC, REM, SERCQ, ...
          enum:
            - PEC
        address:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          example: account@domain.it
          description: >-
            Indirizzo PEC o REM che il mittente della notifica intende
            utilizzare per  raggiungere il destinatario.
          pattern: >-
            ^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$
          maxLength: 320
    NotificationPhysicalAddress:
      description: Indirizzo fisico
      type: object
      required:
        - address
        - municipality
      properties:
        at:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: Campo "presso" dell'indirizzo
          pattern: ^.*$
        address:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: Indirizzo del domicilio fisico
          pattern: ^.*$
          minLength: 2
          maxLength: 1024
        addressDetails:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: Seconda riga dell'indirizzo fisico
          pattern: ^.*$
          maxLength: 1024
        zip:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: >-
            Codice di avviamento postale. In caso di invio estero diventa
            facoltativo
          minLength: 0
          maxLength: 15
          pattern: ^(\w|\ |\-)*$
        municipality:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: Comune
          pattern: ^.*$
          minLength: 2
          maxLength: 256
        municipalityDetails:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: Frazione o località
          pattern: ^.*$
          maxLength: 256
        province:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: Provincia
          pattern: ^.*$
          maxLength: 256
        foreignState:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          description: Denominazione paese estero
          pattern: ^.*$
          maxLength: 256
    noticeCode:
      description: Payment notice number  numero avviso
      example: '302000100000019421'
      type: string
      maxLength: 18
      minLength: 18
      pattern: ^\d+$
    paTaxId:
      description: Payment PA fiscal code
      example: '77777777777'
      type: string
      maxLength: 11
      minLength: 11
      pattern: ^\d+$
    NotificationAttachmentDigests:
      description: Codici per la verifica del corretto caricamento di un allegato
      type: object
      required:
        - sha256
      properties:
        sha256:
          type: string
          description: Digest "sha256" della codifica binaria dell'allegato in base64
          example: jezIVxlG1M1woCSUngM6KipUN3/p8cG5RMIPnuEanlE=
          minLength: 44
          maxLength: 44
          pattern: ^[A-Za-z0-9+\/]{43}=|[A-Za-z0-9+\/]{44}$
    NotificationAttachmentBodyRef:
      description: Riferimento all'allegato precaricato
      required:
        - key
        - versionToken
      type: object
      properties:
        key:
          type: string
          description: Chiave in cui è stato salvato l'allegato
          maxLength: 512
          pattern: ^(safestorage:\/\/)?[A-Za-z0-9._-]+$
        versionToken:
          type: string
          description: >-
            Token per recuperare l'esatta istanza dell'allegato, che dovrà
            coincidere con l'__x-amz-version-id__ ottenuto nell'header della
            response in fase di upload del documento ad esso associato.
          pattern: ^.*$
          maxLength: 256
    NotificationAttachment:
      description: Un allegato della notifica.
      type: object
      required:
        - digests
        - contentType
        - ref
      properties:
        digests:
          $ref: '#/components/schemas/NotificationAttachmentDigests'
        contentType:
          type: string
          description: tipo di contenuto dell'allegato, supportato application/pdf
          minLength: 15
          maxLength: 15
          pattern: ^application\/pdf$
        ref:
          $ref: '#/components/schemas/NotificationAttachmentBodyRef'
    NotificationPaymentAttachment:
      description: Un modulo di pagamento allegato alla notifica
      allOf:
        - $ref: '#/components/schemas/NotificationAttachment'
    PagoPaPayment:
      title: Informazioni per effettuare il pagamento con sistema pagoPA
      description: >-
        Informazioni utili per effettuare il pagamento di una notifica, sono
        associate al destinatario perché le spese di notifica possono differire
        a seconda del canale di notifica utilizzato. <br/>
          - _noticeCode_: "codice avviso pagoPA" di pagamento del sistema pagoPA, usato per pagamento online.<br/>
          - _creditorTaxId_: codice fiscale dell'ente a cui fa riferimento il "codice avviso pagoPA". <br/>
          - _applyCost_: flag per indicare se l'avviso pagoPA deve contenere i costi di notifica. <br/>
          - _pagoPaForm_: riferimento al PDF contenete il bollettino pagoPA<br/>
      type: object
      required:
        - noticeCode
        - creditorTaxId
        - applyCost
      properties:
        noticeCode:
          $ref: '#/components/schemas/noticeCode'
        creditorTaxId:
          $ref: '#/components/schemas/paTaxId'
        applyCost:
          type: boolean
          nullable: false
          description: >-
            Flag per indicare se l'avviso pagoPa deve contenere i costi di
            notifica
        attachment:
          $ref: '#/components/schemas/NotificationPaymentAttachment'
    NotificationMetadataAttachment:
      description: Un metadato allegato della notifica.
      type: object
      required:
        - digests
        - contentType
        - ref
      properties:
        digests:
          $ref: '#/components/schemas/NotificationAttachmentDigests'
        contentType:
          type: string
          description: tipo di contenuto dell'allegato, supportato application/json
          minLength: 16
          maxLength: 16
          pattern: ^application\/json$
        ref:
          $ref: '#/components/schemas/NotificationAttachmentBodyRef'
    F24Payment:
      title: Informazioni per effettuare il pagamento tramite modello F24
      description: >-
        Informazioni utili per effettuare il pagamento di una notifica, sono
        associate al destinatario perché le spese di notifica possono differire
        a seconda del canale di notifica utilizzato. <br/>
          - _title_: titolo del documento pdf da mostrare all'utente .<br/>
          - _applyCost_: flag per indicare se il modello F24 deve contenere i costi di notifica.<br/>
          - _metadataAttachment_: riferimento ai metadati per la generazione del modello F24.<br/>
      type: object
      required:
        - title
        - applyCost
        - metadataAttachment
      properties:
        title:
          description: Titolo del documento pdf da mostrare all'utente
          type: string
        applyCost:
          type: boolean
          nullable: false
          description: Flag per indicare se il modello F24 deve contere i costi di notifica
        metadataAttachment:
          $ref: '#/components/schemas/NotificationMetadataAttachment'
    NotificationPaymentItem:
      minProperties: 1
      additionalProperties: false
      nullable: false
      properties:
        pagoPa:
          $ref: '#/components/schemas/PagoPaPayment'
        f24:
          $ref: '#/components/schemas/F24Payment'
    NotificationPayments:
      title: Pagamenti collegati alla notifica per il destinatario
      description: >-
        Lista dei pagamenti collegati alla notifica per il destinatario. Possono
        essere pagamenti rateali o alternativi
      type: array
      items:
        $ref: '#/components/schemas/NotificationPaymentItem'
    NotificationRecipientV23:
      description: Informazioni sui destinatari
      required:
        - denomination
        - recipientType
        - taxId
        - physicalAddress
      type: object
      additionalProperties: false
      properties:
        recipientType:
          type: string
          description: >-
            Tipologia di destinatario: Persona Fisica (PF) o Persona Giuridica
            (PG)
          enum:
            - PF
            - PG
        taxId:
          $ref: '#/components/schemas/TaxId'
        internalId:
          type: string
          description: id interno anonimizzato
        denomination:
          $ref: '#/components/schemas/Denomination'
        digitalDomicile:
          $ref: '#/components/schemas/NotificationDigitalAddress'
        physicalAddress:
          $ref: '#/components/schemas/NotificationPhysicalAddress'
        payments:
          $ref: '#/components/schemas/NotificationPayments'
    NotificationDocument:
      description: Un documento da notificare
      allOf:
        - $ref: '#/components/schemas/NotificationAttachment'
        - type: object
          properties:
            title:
              type: string
              description: >-
                Titolo del documento allegato. Stringa alfanumerica con
                caratteri utilizzabili in un nome file.
              minLength: 1
              maxLength: 512
              pattern: ^.*$
            docIdx:
              type: string
              description: Indice del documento partendo da 0.
              maxLength: 3
              pattern: ^\d+$
    NotificationFeePolicy:
      type: string
      description: >-
        Politica di addebitamento dei costi di notifica. <br/> - _FLAT_RATE_:
        costo forfettario fisso. In questa modalità SEND non gestisce  il costo
        della notifica per il destinatario.<br/> - _DELIVERY_MODE_: costo
        calcolato in base all'effettivo percorso di notifica. <br/>
      enum:
        - FLAT_RATE
        - DELIVERY_MODE
    BffNewNotificationRequest:
      description: I campi utilizzati per la creazione di una nuova Notifica.
      type: object
      required:
        - paProtocolNumber
        - subject
        - recipients
        - documents
        - physicalCommunicationType
        - notificationFeePolicy
        - senderDenomination
        - senderTaxId
        - taxonomyCode
      properties:
        paProtocolNumber:
          description: Numero di protocollo che la PA mittente assegna alla notifica stessa
          type: string
          pattern: ^.*$
          maxLength: 256
        subject:
          type: string
          description: titolo della notifica
          maxLength: 134
          pattern: ^.*$
        abstract:
          type: string
          description: descrizione sintetica della notifica
          pattern: ^.*$
          maxLength: 1024
        recipients:
          type: array
          description: Informazioni sui destinatari
          items:
            $ref: '#/components/schemas/NotificationRecipientV23'
        documents:
          type: array
          description: Documenti notificati
          items:
            $ref: '#/components/schemas/NotificationDocument'
          minItems: 1
        notificationFeePolicy:
          $ref: '#/components/schemas/NotificationFeePolicy'
        cancelledIun:
          $ref: '#/components/schemas/IUN'
        physicalCommunicationType:
          type: string
          description: Tipologia comunicazione fisica
          enum:
            - AR_REGISTERED_LETTER
            - REGISTERED_LETTER_890
        senderDenomination:
          $ref: '#/components/schemas/Denomination'
        senderTaxId:
          $ref: '#/components/schemas/paTaxId'
        group:
          type: string
          description: Gruppo di utenti dell'ente mittente che può visualizzare la notifica
          pattern: ^[ -~]*$
          maxLength: 1024
        taxonomyCode:
          type: string
          minLength: 7
          maxLength: 7
          pattern: ^([0-9]{6}[A-Z]{1})$
          description: >-
            Codice tassonomico della notifica basato sulla definizione presente
            nell'allegato 2 capitolo C del bando [__AVVISO PUBBLICO MISURA 1.4.5
            PIATTAFORMA NOTIFICHE
            DIGITALI__](https://pnrrcomuni.fondazioneifel.it/bandi_public/Bando/325)
        additionalLanguages:
          type: array
          description: >-
            In questo campo è possibile definire la lingua addizionale (oltre a
            quella italiana) da utilizzare per la generazione documenti, atti
            opponibili a terzi ecc. Attualmente è possibile indicare un solo
            item e dunque una sola lingua aggiuntiva.
          items:
            type: string
            maxItems: 1
    NewNotificationResponse:
      title: Identificativi della richiesta di notifica
      description: >-
        Contiene le informazioni per identificare una richiesta di invio
        notifica che non è ancora stata accettata da Piattaforma notifiche.
      type: object
      required:
        - notificationRequestId
        - paProtocolNumber
      properties:
        notificationRequestId:
          type: string
          description: >-
            identificativo univoco di una richiesta di invio notifica, non è lo
            IUN
          maxLength: 36
          pattern: ^[A-Za-z0-9+/=]{36}$
        paProtocolNumber:
          type: string
          description: Identificativo inviato dalla pubblica amministrazione
        idempotenceToken:
          description: >-
            Ripetizione del token usato per disambiguare "richieste di
            notificazione"  effettuate con lo stesso numero di protocollo (campo
            _paProtocolNumber_).
          type: string
    PaFeeV23:
      type: number
      description: >-
        Costo espresso in eurocent sostenuto dal mittente, per l'elaborazione
        degli atti, provvedimenti, avvisi e comunicazioni oggetto di notifica,
        per il relativo deposito sulla piattaforma e per la gestione degli 
        esiti della notifica (Decreto 30 maggio 2022 - Art. 3, comma 1, lettera
        a). <br/> Obbligatoria per notifiche con
        notificationFeePolicy=DELIVERY_MODE <br/> Per le notifiche effettuate
        con versioni precedenti alla 2.3 si assume il valore di default
        100.<br/> Esempio paFee ad 1€ -> 100 <br/>
      minimum: 0
      maximum: 100
    VatV23:
      type: number
      description: >-
        IVA espressa in percentuale sui costi degli avvisi in formato
        cartaceo.<br/> Obbligatoria per notifiche con
        notificationFeePolicy=DELIVERY_MODE. <br/> Per le notifiche effettuate
        con versioni precedenti alla 2.3 si assume il valore di default 22.
        <br/> Esempio vat al 22% -> 22 <br/>
      minimum: 0
      maximum: 100
    NewNotificationRequestV24:
      description: I campi utilizzati per la creazione di una nuova Notifica.
      type: object
      required:
        - paProtocolNumber
        - subject
        - recipients
        - documents
        - physicalCommunicationType
        - notificationFeePolicy
        - senderDenomination
        - senderTaxId
        - taxonomyCode
      properties:
        idempotenceToken:
          description: >-
            Identificativo utilizzabile dal chiamante per disambiguare
            differenti  "richieste di notificazione" effettuate con lo stesso
            numero di protocollo  (campo _paProtocolNumber_). Questo può essere
            necessario in caso di  "richiesta di notifica" rifiutata per errori
            nei codici di verifica degli allegati.
          type: string
          pattern: ^[ -~]*$
          maxLength: 256
        paProtocolNumber:
          description: Numero di protocollo che la PA mittente assegna alla notifica stessa
          type: string
          pattern: ^.*$
          maxLength: 256
        subject:
          type: string
          description: titolo della notifica
          maxLength: 134
          pattern: ^.*$
        abstract:
          type: string
          description: descrizione sintetica della notifica
          pattern: ^.*$
          maxLength: 1024
        recipients:
          type: array
          description: Informazioni sui destinatari
          items:
            $ref: '#/components/schemas/NotificationRecipientV23'
          minItems: 1
        documents:
          type: array
          description: Documenti notificati
          items:
            $ref: '#/components/schemas/NotificationDocument'
          minItems: 1
        notificationFeePolicy:
          $ref: '#/components/schemas/NotificationFeePolicy'
        cancelledIun:
          $ref: '#/components/schemas/IUN'
        physicalCommunicationType:
          type: string
          description: Tipologia comunicazione fisica
          enum:
            - AR_REGISTERED_LETTER
            - REGISTERED_LETTER_890
        senderDenomination:
          $ref: '#/components/schemas/Denomination'
        senderTaxId:
          $ref: '#/components/schemas/paTaxId'
        group:
          type: string
          description: Gruppo di utenti dell'ente mittente che può visualizzare la notifica
          pattern: ^[ -~]*$
          maxLength: 1024
        amount:
          type: number
          description: Importo della notifica in eurocent
        paymentExpirationDate:
          type: string
          minLength: 10
          maxLength: 10
          pattern: ^([0-9]{4})-(1[0-2]|0[1-9])-(3[01]|[12][0-9]|0[1-9])$
          description: >-
            Data di scadenza del pagamento nel formato YYYY-MM-DD riferito
            all'Italia
        taxonomyCode:
          type: string
          minLength: 7
          maxLength: 7
          pattern: ^([0-9]{6}[A-Z]{1})$
          description: >-
            Codice tassonomico della notifica basato sulla definizione presente
            nell'allegato 2 capitolo C del bando [__AVVISO PUBBLICO MISURA 1.4.5
            PIATTAFORMA NOTIFICHE
            DIGITALI__](https://pnrrcomuni.fondazioneifel.it/bandi_public/Bando/325)
        paFee:
          $ref: '#/components/schemas/PaFeeV23'
        vat:
          $ref: '#/components/schemas/VatV23'
        pagoPaIntMode:
          type: string
          description: >-
            Modalitá di integrazione pagoPA per l'attualizazione del costo della
            notifica. <br/> - _NONE_: nessuna attualizzazione. <br/> - _SYNC_:
            modalitá sincrona. <br/> - _ASYNC_: modalitá asincrona. <br/>
          enum:
            - NONE
            - SYNC
            - ASYNC
        additionalLanguages:
          description: >-
            In questo campo è possibile definire la lingua addizionale (oltre a
            quella italiana) da utilizzare per la generazione documenti, atti
            opponibili a terzi ecc.<br/> Le lingue accettate e dunque i valori
            possibili degli item dell'array sono: <br/> - DE <br/> - SI <br/> -
            FR <br/> DE (tedesco), SI (sloveno), FR (francese) Attualmente è
            possibile indicare un solo item e dunque una sola lingua aggiuntiva.
            Se non vengono indicate lingue aggiuntive la lingua utilizzata per
            generare <br/> documenti, atti opponibili a terzi ecc. sarà quella
            italiana.
          type: array
          items:
            type: string
            maxItems: 1
    SentNotificationV24:
      description: Le informazioni riguardanti una richiesta di notifica accettata
      allOf:
        - $ref: '#/components/schemas/NewNotificationRequestV24'
        - type: object
          required:
            - iun
            - sentAt
          properties:
            senderPaId:
              type: string
              description: >-
                Identificativo (non IPA) della PA mittente che ha eseguito
                l'onboarding su SelfCare.
              pattern: ^.*$
              maxLength: 256
            iun:
              $ref: '#/components/schemas/IUN'
            sentAt:
              type: string
              description: Momento di ricezione della notifica da parte di PN
              format: date-time
            cancelledByIun:
              $ref: '#/components/schemas/IUN'
            documentsAvailable:
              type: boolean
              description: Indica se i documenti notificati sono ancora disponibili.
            version:
              type: string
              description: Indica la versione della notifica
    BffNotificationStatus:
      type: string
      enum:
        - IN_VALIDATION
        - ACCEPTED
        - DELIVERING
        - DELIVERED
        - VIEWED
        - EFFECTIVE_DATE
        - PAID
        - UNREACHABLE
        - CANCELLED
        - REFUSED
        - CANCELLATION_IN_PROGRESS
        - RETURNED_TO_SENDER
    BffLegalFactType:
      type: string
      enum:
        - AAR
        - SENDER_ACK
        - DIGITAL_DELIVERY
        - ANALOG_DELIVERY
        - RECIPIENT_ACCESS
        - PEC_RECEIPT
        - ANALOG_FAILURE_DELIVERY
        - NOTIFICATION_CANCELLED
    BffLegalFactId:
      type: object
      required:
        - key
        - category
      properties:
        key:
          type: string
          pattern: ^(safestorage:\/\/)?[A-Za-z0-9._-]+$
          maxLength: 512
        category:
          $ref: '#/components/schemas/BffLegalFactType'
    TimelineElementCategoryV26:
      type: string
      description: |
        stato di avanzamento del processo di notifica:`
          * `SENDER_ACK_CREATION_REQUEST` - Invio della richiesta di creazione, firma e marca dell'atto opponibile a terzi di presa in carico per il mittente a safe storage
          * `VALIDATE_NORMALIZE_ADDRESSES_REQUEST` - Invio della richiesta di validazione e normalizzazione indirizzi fisici presenti nella richiesta di notifica
          * `NORMALIZED_ADDRESS` - Salvataggio indirizzi normalizzati
          * `REQUEST_ACCEPTED` - Richiesta di notifica accettata a seguito dei controlli di validazione
          * `REQUEST_REFUSED` - Richiesta di notifica rifiutata per fallimento di validazione
          * `SEND_COURTESY_MESSAGE` - Invio di un messaggio di cortesia
          * `GET_ADDRESS` - Disponibilità dell’indirizzo specifico (domicilio digitale di piattaforma, domicilio digitale speciale, domicilio digitale generale, indirizzo fisico sulla notifica o sui registri nazionali)
          * `PUBLIC_REGISTRY_CALL` - Richiesta ai registri pubblici per ottenere domicilio digitale generale o per ottenere indirizzo fisico da ANPR, da registro della imprese, da anagrafe tributaria.
          * `PUBLIC_REGISTRY_RESPONSE` - Ricevuta la risposta dei registri pubblici
          * `SCHEDULE_ANALOG_WORKFLOW` - Pianificazione del workflow per invio cartaceo
          * `SCHEDULE_DIGITAL_WORKFLOW` -Pianificazione del workflow per invio digitale (PEC) del secondo tentativo in caso di fallimento del primo.
          * `PREPARE_DIGITAL_DOMICILE` - Preparazione per l’invio dell’avviso digitale.Va a valutare la timeline per capire quale sarà il prossimo indirizzo da usare.
          * `SEND_DIGITAL_DOMICILE` - Invio digitale dell’avviso di notifica
          * `SEND_DIGITAL_PROGRESS` - Tentativo di Invio PEC ad un determinato indirizzo.
          * `SEND_DIGITAL_FEEDBACK` - Ottenuto esito ad un invio digitale
          * `SCHEDULE_REFINEMENT` - Pianificato il perfezionamento per decorrenza termini
          * `REFINEMENT` - Perfezionamento per decorrenza termini
          * `DIGITAL_DELIVERY_CREATION_REQUEST` - Invio della richiesta di creazione, firma e marca dell'atto opponibile a terzi di chiusura del workflow digitale a safe storage
          * `DIGITAL_SUCCESS_WORKFLOW` - Completato con successo il workflow di invio digitale
          * `DIGITAL_FAILURE_WORKFLOW` - Completato con fallimento il workflow di invio digitale: tutti i tentativi di invio ai domicili digitali sono falliti.
          * `ANALOG_SUCCESS_WORKFLOW` - Completato con successo il workflow di invio cartaceo
          * `ANALOG_FAILURE_WORKFLOW` - Completato con fallimento il workflow di invio cartaceo NOTA: se per tutti i destinatari si conclude il workflow con fallimento verrà scatenato l’evento COMPLETELY_UNREACHABLE
          * `PREPARE_SIMPLE_REGISTERED_LETTER` - Invio richiesta di prepare (preparazione ad invio) raccomandata semplice a paperChannel
          * `SEND_SIMPLE_REGISTERED_LETTER` - Invio di raccomandata semplice
          * `SEND_SIMPLE_REGISTERED_LETTER_PROGRESS` - Ricezione informazioni intermedia relative ad una notificazione cartacea semplice
          * `NOTIFICATION_VIEWED_CREATION_REQUEST` - Invio della richiesta di creazione, firma e marca dell'atto opponibile a terzi di presa visione a safe storage
          * `NOTIFICATION_VIEWED` - Visualizzazione della notifica (perfeziona la notifica se non già perfezionata per decorrenza termini o da altro destinatario)
          * `PREPARE_ANALOG_DOMICILE` - Invio richiesta di prepare (preparazione ad invio) cartaceo a paperChannel
          * `SEND_ANALOG_DOMICILE` - Invio cartaceo dell’avviso di notifica
          * `SEND_ANALOG_PROGRESS` - Ricezione informazioni intermedia relative ad una notificazione cartacea
          * `SEND_ANALOG_FEEDBACK` - Ricezione esito dell'invio cartaceo
          * `COMPLETELY_UNREACHABLE_CREATION_REQUEST` - Invio della richiesta di creazione, firma e marca dell'atto (simile a opponibile a terzi) di completamento con fallimento del workflow di invio cartaceo
          * `COMPLETELY_UNREACHABLE` - Tutti i destinatari risultano irraggiungibili
          * `AAR_CREATION_REQUEST` - Invio della richiesta di creazione, firma e marca dell'AAR (Avviso di Avvenuta Ricezione) a safe storage
          * `AAR_GENERATION` - Generazione dell’AAR (Avviso di Avvenuta Ricezione)
          * `PAYMENT` - Evento di ricezione __dal mittente__ dell'informazione di chiusura di uno o più pagamenti di tipo pagoPA (vedi #/components/schemas/PagoPaPayment). La presenza di questo evento inibisce l'invio di eventuali comunicazioni analogiche future ma non perfeziona la notifica.
          * `NOT_HANDLED` - [DEPRECATO] Per la sperimentazione l'invio analogico non è previsto, viene inserito tale elemento di timeline
          * `PROBABLE_SCHEDULING_ANALOG_DATE` - Data probabile di inizio del flusso analogico
          * `NOTIFICATION_CANCELLATION_REQUEST` - Richiesta di annullamento di una notifica
          * `NOTIFICATION_CANCELLED` - Notifica annullata
          * `PREPARE_ANALOG_DOMICILE_FAILURE` - Fallimento della richiesta di prepare (preparazione ad invio) cartaceo a paperChannel
          * `NOTIFICATION_RADD_RETRIEVED` - Accesso alla notifica tramite la rete RADD. Non perfeziona la notifica.
          * `ANALOG_WORKFLOW_RECIPIENT_DECEASED` - Destinatario deceduto
      enum:
        - SENDER_ACK_CREATION_REQUEST
        - VALIDATE_NORMALIZE_ADDRESSES_REQUEST
        - NORMALIZED_ADDRESS
        - REQUEST_ACCEPTED
        - SEND_COURTESY_MESSAGE
        - GET_ADDRESS
        - PUBLIC_REGISTRY_CALL
        - PUBLIC_REGISTRY_RESPONSE
        - SCHEDULE_ANALOG_WORKFLOW
        - SCHEDULE_DIGITAL_WORKFLOW
        - PREPARE_DIGITAL_DOMICILE
        - SEND_DIGITAL_DOMICILE
        - SEND_DIGITAL_PROGRESS
        - SEND_DIGITAL_FEEDBACK
        - REFINEMENT
        - SCHEDULE_REFINEMENT
        - DIGITAL_DELIVERY_CREATION_REQUEST
        - DIGITAL_SUCCESS_WORKFLOW
        - DIGITAL_FAILURE_WORKFLOW
        - ANALOG_SUCCESS_WORKFLOW
        - ANALOG_FAILURE_WORKFLOW
        - PREPARE_SIMPLE_REGISTERED_LETTER
        - SEND_SIMPLE_REGISTERED_LETTER
        - SEND_SIMPLE_REGISTERED_LETTER_PROGRESS
        - NOTIFICATION_VIEWED_CREATION_REQUEST
        - NOTIFICATION_VIEWED
        - PREPARE_ANALOG_DOMICILE
        - SEND_ANALOG_DOMICILE
        - SEND_ANALOG_PROGRESS
        - SEND_ANALOG_FEEDBACK
        - PAYMENT
        - COMPLETELY_UNREACHABLE
        - COMPLETELY_UNREACHABLE_CREATION_REQUEST
        - REQUEST_REFUSED
        - AAR_CREATION_REQUEST
        - AAR_GENERATION
        - NOT_HANDLED
        - PROBABLE_SCHEDULING_ANALOG_DATE
        - NOTIFICATION_CANCELLATION_REQUEST
        - NOTIFICATION_CANCELLED
        - PREPARE_ANALOG_DOMICILE_FAILURE
        - NOTIFICATION_RADD_RETRIEVED
        - ANALOG_WORKFLOW_RECIPIENT_DECEASED
    SenderAckCreationRequestDetails:
      type: object
      properties:
        legalFactId:
          type: string
          maxLength: 128
          description: >-
            Identificativo dell'atto opponibile a terzi del quale è stata
            richiesta la creazione
    PhysicalAddress:
      type: object
      required:
        - address
        - municipality
      properties:
        at:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: Campo "presso" dell'indirizzo
        address:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: Indirizzo del domicilio fisico
        addressDetails:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: Seconda riga dell'indirizzo fisico
        zip:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: >-
            Codice di avviamento postale. In caso di invio estero diventa
            facoltativo
        municipality:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: Comune in cui l'indirizzo si trova
        municipalityDetails:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: Frazione o località
        province:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: Provincia in cui si trova l'indirizzo
        foreignState:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: Denominazione paese estero
      description: Indirizzo fisico scoperto durante fase di consegna
    NormalizedAddressDetails:
      type: object
      required:
        - recIndex
        - oldAddress
        - normalizedAddress
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        oldAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        normalizedAddress:
          $ref: '#/components/schemas/PhysicalAddress'
    NotificationRequestAcceptedDetails:
      type: object
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
    AnalogFailureWorkflowDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        generatedAarUrl:
          type: string
          maxLength: 128
          description: Chiave per recupero da safe-storage del documento aar
    AnalogSuccessWorkflowDetails:
      type: object
      required:
        - recIndex
        - physicalAddress
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
    EndWorkflowStatus:
      type: string
      description: Stato chiusura workflow
      enum:
        - SUCCESS
        - FAILURE
    CompletelyUnreachableCreationRequestDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        legalfactId:
          type: string
          maxLength: 128
          description: >-
            Identificativo dell'atto opponibile a terzi del quale è stata
            richiesta la creazione
        endWorkflowStatus:
          $ref: '#/components/schemas/EndWorkflowStatus'
        completionWorkflowDate:
          type: string
          description: Data chiusura workflow
          format: date-time
    CompletelyUnreachableDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        legalFactGenerationDate:
          type: string
          description: Data generazione atto opponibile a terzi allegato
          format: date-time
    DigitalAddress:
      description: Indirizzo di invio della notifica
      required:
        - address
        - type
      type: object
      properties:
        type:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: tipo di indirizzo PEC, REM, SERCQ, SMS, EMAIL, APPIO ...
        address:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          description: account@domain
    DigitalDeliveryCreationRequestDetails:
      type: object
      required:
        - recIndex
        - digitalAddress
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        endWorkflowStatus:
          $ref: '#/components/schemas/EndWorkflowStatus'
        completionWorkflowDate:
          type: string
          description: Data chiusura workflow
          format: date-time
        legalfactId:
          type: string
          maxLength: 128
          description: >-
            Identificativo dell'atto opponibile a terzi del quale è stata
            richiesta la creazione
    DigitalFailureWorkflowDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
    DigitalSuccessWorkflowDetails:
      type: object
      required:
        - recIndex
        - digitalAddress
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
    DigitalAddressSource:
      type: string
      description: sorgente indirizzo di invio della notifica
      enum:
        - PLATFORM
        - SPECIAL
        - GENERAL
    GetAddressInfoDetails:
      type: object
      required:
        - recIndex
        - digitalAddressSource
        - isAvailable
        - attemptDate
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddressSource:
          $ref: '#/components/schemas/DigitalAddressSource'
        isAvailable:
          type: boolean
          description: Disponibilità indirizzo
        attemptDate:
          type: string
          description: Data tentativo
          format: date-time
    RaddTypeV23:
      type: string
      description: |
        tipo di Rete Anti Digital Divide <br/>
        __FSU__: Fornitore Servizio Universale <br/>
        __ALT__: Fornitore RADD Alternativa <br/>
    RaddTransactionId:
      type: string
      description: Identificativo della pratica all'interno della rete RADD
      maxLength: 512
    RecipientType:
      type: string
      enum:
        - PF
        - PG
    DelegateInfo:
      type: object
      properties:
        internalId:
          type: string
          maxLength: 128
        taxId:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          maxLength: 128
        operatorUuid:
          type: string
          maxLength: 128
        mandateId:
          type: string
          maxLength: 128
        denomination:
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          type: string
          maxLength: 128
        delegateType:
          $ref: '#/components/schemas/RecipientType'
    NotificationViewedCreationRequestDetailsV23:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        legalfactId:
          type: string
          maxLength: 128
          description: >-
            Identificativo dell'atto opponibile a terzi del quale è stata
            richiesta la creazione
        eventTimestamp:
          type: string
          description: Data ricezione richiesta visualizzazione notifica
          format: date-time
        raddType:
          $ref: '#/components/schemas/RaddTypeV23'
        raddTransactionId:
          $ref: '#/components/schemas/RaddTransactionId'
        delegateInfo:
          $ref: '#/components/schemas/DelegateInfo'
    NotificationViewedDetailsV23:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        notificationCost:
          description: >-
            costo notifica in euro cents, può essere nullo se la notifica si è
            perfezionata prima per decorrenza termini
          example: 1220
          type: number
        raddType:
          $ref: '#/components/schemas/RaddTypeV23'
        raddTransactionId:
          $ref: '#/components/schemas/RaddTransactionId'
        delegateInfo:
          $ref: '#/components/schemas/DelegateInfo'
        eventTimestamp:
          type: string
          description: Data evento visualizzazione
          format: date-time
    NotificationRADDRetrievedDetails:
      type: object
      required:
        - recIndex
        - raddType
        - raddTransactionId
        - eventTimestamp
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        raddType:
          $ref: '#/components/schemas/RaddTypeV23'
        raddTransactionId:
          $ref: '#/components/schemas/RaddTransactionId'
        eventTimestamp:
          type: string
          description: Data evento
          format: date-time
    DeliveryMode:
      type: string
      description: Tipologia Domiciliazione
      enum:
        - DIGITAL
        - ANALOG
    ContactPhase:
      type: string
      description: Fase in cui è avvenuta la richiesta
      enum:
        - CHOOSE_DELIVERY
        - SEND_ATTEMPT
    PublicRegistryCallDetails:
      type: object
      required:
        - recIndex
        - deliveryMode
        - contactPhase
        - sentAttemptMade
        - sendDate
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        deliveryMode:
          $ref: '#/components/schemas/DeliveryMode'
        contactPhase:
          $ref: '#/components/schemas/ContactPhase'
        sentAttemptMade:
          type: number
          description: Numero di tentativi di notificazione già effettuati
        sendDate:
          type: string
          description: Data invio richiesta ai public registry
          format: date-time
    PublicRegistryResponseDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
    RefinementDetailsV23:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        notificationCost:
          description: >-
            costo notifica in euro cents, può essere nullo se la notifica si è
            perfezionata prima per visualizzazione
          example: 1220
          type: number
        eventTimestamp:
          type: string
          description: Data evento refinement
          format: date-time
    NotificationRefusedErrorV25:
      type: object
      properties:
        errorCode:
          type: string
          maxLength: 128
          description: |-
            Errori di rifiuto della notifica.
              - FILE_NOTFOUND - I riferimenti dei documenti nella notifica non sono corretti o i documenti non sono stati caricati con successo.
              - FILE_GONE - Allegato non disponibile: superati i termini di conservazione
              - FILE_SHA_ERROR - Il digest calcolato con algoritmi sha256 dei documenti inseriti non è corrispondete a quello del file referenziato.
              - FILE_PDF_INVALID_ERROR - Il file inserito non è in formato pdf.
              - FILE_PDF_TOOBIG_ERROR - Il file pdf ha una dimensione eccedente il limite di 200MB.
              - F24_METADATA_NOT_VALID - I dati contenuti del file dei metadati F24 non rispettano lo schema di validazione.
              - TAXID_NOT_VALID - Codice fiscale del destinatario non corretto (non ancora implementato).
              - RECIPIENT_ID_NOT_VALID - Destinatario non Valido (utilizzato solo per funzionalità non ancora implementate)
              - NOT_VALID_ADDRESS - L'indirizzo di invio cartaceo inserito per il destinatario non ha superato i controlli di correttezza.
              - PAYMENT_NOT_VALID - I dati del pagamento non sono sono registrati sulla piattaforma GPD (modalità asincrona di integrazione pagoPA)
              - SERVICE_UNAVAILABLE - Il sistema non è attualmente disponibile.
              ...
        detail:
          type: string
          maxLength: 2048
    RequestRefusedDetailsV25:
      type: object
      properties:
        refusalReasons:
          type: array
          description: Motivazioni che hanno portato al rifiuto della notifica
          items:
            $ref: '#/components/schemas/NotificationRefusedErrorV25'
    ScheduleAnalogWorkflowDetailsV23:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        schedulingDate:
          type: string
          description: Data prevista per l'inizio dell'invio analogico
          format: date-time
    ScheduleDigitalWorkflowDetailsV23:
      type: object
      required:
        - recIndex
        - digitalAddressSource
        - sentAttemptMade
        - lastAttemptDate
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        digitalAddressSource:
          $ref: '#/components/schemas/DigitalAddressSource'
        sentAttemptMade:
          type: number
        lastAttemptDate:
          type: string
          format: date-time
        schedulingDate:
          type: string
          description: >-
            Data prevista prossimo tentativo d'invio digitale per quella
            specifica sorgente di indirizzo
          format: date-time
    ScheduleRefinementDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        schedulingDate:
          type: string
          format: date-time
    IoSendMessageResult:
      type: string
      description: Risultato invio messaggio su IO
      enum:
        - NOT_SENT_OPTIN_ALREADY_SENT
        - SENT_COURTESY
        - SENT_OPTIN
    SendCourtesyMessageDetails:
      type: object
      required:
        - recIndex
        - digitalAddress
        - sendDate
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        sendDate:
          type: string
          description: data invio messaggio di cortesia
          format: date-time
        ioSendMessageResult:
          $ref: '#/components/schemas/IoSendMessageResult'
    PrepareDigitalDetails:
      type: object
      required:
        - recIndex
        - digitalAddressSource
        - retryNumber
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        digitalAddressSource:
          $ref: '#/components/schemas/DigitalAddressSource'
        retryNumber:
          type: number
          description: numero dei tentativi effettuati
        attemptDate:
          type: string
          description: data tentativo precedente
          format: date-time
        nextDigitalAddressSource:
          $ref: '#/components/schemas/DigitalAddressSource'
        nextSourceAttemptsMade:
          type: number
          description: numero del prossimo tentativo da effettuare
        nextLastAttemptMadeForSource:
          type: string
          description: data tentativo precedente per prossimo source
          format: date-time
    SendDigitalDetails:
      type: object
      required:
        - recIndex
        - digitalAddress
        - digitalAddressSource
        - retryNumber
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        digitalAddressSource:
          $ref: '#/components/schemas/DigitalAddressSource'
        retryNumber:
          type: number
          description: numero dei tentativi effettuati
    ResponseStatus:
      type: string
      description: stato risposta ricevuta da externalChannel
      enum:
        - OK
        - KO
    SendingReceipt:
      type: object
      properties:
        id:
          type: string
          description: messageId del server mittente
          maxLength: 1024
        system:
          type: string
          description: nome del server mittente
          maxLength: 128
    SendDigitalFeedbackDetails:
      type: object
      required:
        - recIndex
        - digitalAddress
        - responseStatus
        - notificationDate
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        responseStatus:
          $ref: '#/components/schemas/ResponseStatus'
        notificationDate:
          type: string
          description: data notifica
          format: date-time
        deliveryFailureCause:
          description: Codice errore, vuoto in caso di successo
          type: string
        deliveryDetailCode:
          type: string
          description: |
            Stato - Codice relativo all'evento - Descrizione:
              - PROGRESS   C000 = PREACCETTAZIONE
              - PROGRESS   C001 = ACCETTAZIONE
              - PROGRESS   C005 = PRESA_IN_CARICO
              - PROGRESS   C007 = PREAVVISO_ERRORE_CONSEGNA
              - PROGRESS   DP00 = RE-INVIO PEC CAUSA FALLIMENTO TEMPORANEO
              - PROGRESS   DP10 = TIMEOUT RICEZIONE RISULTATO
              - ERROR      C002 = NON_ACCETTAZIONE
              - ERROR      C004 = ERRORE_CONSEGNA
              - ERROR      C006 = RILEVAZIONE_VIRUS
              - ERROR      C008 = ERRORE_COMUNICAZIONE_SERVER_PEC
              - ERROR      C009 = ERRORE_DOMINIO_PEC_NON_VALIDO
              - ERROR      C010 = ERROR_INVIO_PEC
              - OK         C003 = AVVENUTA_CONSEGNA
        sendingReceipts:
          type: array
          items:
            $ref: '#/components/schemas/SendingReceipt'
    SendDigitalProgressDetailsV23:
      type: object
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        deliveryFailureCause:
          description: Codice errore, opzionale
          type: string
        deliveryDetailCode:
          type: string
          description: Vedi deliveryDetailCode in SendDigitalFeedbackDetails
        shouldRetry:
          type: boolean
          description: indica se il progress ha dato luogo ad un ritentativo
        digitalAddress:
          $ref: '#/components/schemas/DigitalAddress'
        digitalAddressSource:
          $ref: '#/components/schemas/DigitalAddressSource'
        notificationDate:
          type: string
          description: data notifica
          format: date-time
        sendingReceipts:
          type: array
          items:
            $ref: '#/components/schemas/SendingReceipt'
        retryNumber:
          type: number
          description: numero dei tentativi effettuati
        eventTimestamp:
          type: string
          description: Data evento
          format: date-time
    ServiceLevel:
      type: string
      description: Livello Servizio
      enum:
        - AR_REGISTERED_LETTER
        - REGISTERED_LETTER_890
    BaseAnalogDetails:
      type: object
      required:
        - recIndex
        - physicalAddress
        - serviceLevel
        - sentAttemptMade
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        serviceLevel:
          $ref: '#/components/schemas/ServiceLevel'
        sentAttemptMade:
          type: number
          description: numero dei tentativi effettuati
        relatedRequestId:
          type: string
          description: Id relativo alla eventuale precedente richiesta di invio cartaceo
          maxLength: 512
    SendAnalogDetails:
      type: object
      required:
        - recIndex
        - physicalAddress
        - serviceLevel
        - sentAttemptMade
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        serviceLevel:
          $ref: '#/components/schemas/ServiceLevel'
        sentAttemptMade:
          type: number
          description: numero dei tentativi effettuati
        relatedRequestId:
          type: string
          description: Id relativo alla eventuale precedente richiesta di invio cartaceo
          maxLength: 512
        productType:
          type: string
          maxLength: 10
          description: |
            Tipo di invio cartaceo effettivamente inviato
              - __AR__: Raccomandata nazionale Andata e Ritorno
              - __890__: Recapito a norma della legge 890/1982
              - __RIR__: Raccomandata internazionale Andata e Ritorno
        analogCost:
          type: number
          description: costo in eurocent dell'invio
        numberOfPages:
          type: number
          description: numero delle pagina che compongono la spedizione cartacea
        envelopeWeight:
          type: number
          description: peso in grammi della busta
        prepareRequestId:
          type: string
          description: request id della relativa richiesta di prepare
          maxLength: 512
    AttachmentDetails:
      type: object
      properties:
        id:
          type: string
          maxLength: 128
        documentType:
          type: string
          maxLength: 20
          description: >
            Codici documentType: - Plico: Indica il plico cartaceo - AR: Indica
            la ricevuta di ritorno - Indagine: Indica la ricevuta dell'analisi
            dell'indagine - 23L: Indica la ricevuta 23L
        url:
          type: string
          maxLength: 128
        date:
          type: string
          format: date-time
    SendAnalogFeedbackDetailsV25:
      type: object
      required:
        - recIndex
        - physicalAddress
        - serviceLevel
        - sentAttemptMade
        - responseStatus
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        serviceLevel:
          $ref: '#/components/schemas/ServiceLevel'
        sentAttemptMade:
          type: number
          description: numero dei tentativi effettuati
        newAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        responseStatus:
          $ref: '#/components/schemas/ResponseStatus'
        notificationDate:
          type: string
          format: date-time
        deliveryFailureCause:
          type: string
          maxLength: 10
          description: >
            __Motivazione di mancata consegna__ obbligatorie negli stati di
            mancata consegna
              - __M01__ destinatario irreperibile
              - __M02__ destinatario deceduto
              - __M03__ destinatario sconosciuto
              - __M04__ destinatario trasferito
              - __M05__ invio rifiutato
              - __M06__ indirizzo inesatto
              - __M07__ indirizzo inesistente
              - __M08__ indirizzo insufficiente
              - __F01__ - in caso di furto
              - __F02__ - in caso di smarrimento
              - __F03__ - in caso di deterioramento
        deliveryDetailCode:
          type: string
          maxLength: 20
          description: >
            Formato: - __deliveryDetailCode__- [prodotto] - [statusCode] -
            statusDescription
              - __CON020__- [ALL] - [PROGRESS] - Originale dell’AAR (documento nativo digitale) reso disponibile dal Consolidatore e firmato digitalmente da PagoPA
              - __CON080__- [ALL] - [PROGRESS] - Stampato ed Imbustato
              - __RECRS001C__- [RS] - [OK] - Consegnato - Fascicolo Chiuso
              - __RECRS002C__- [RS] - [KO] - Mancata consegna - Fascicolo Chiuso
              - __RECRS002F__- [RS] - [KO] - Irreperibilità Assoluta - Fascicolo Chiuso
              - __RECRS003C__- [RS] - [OK] - Consegnato presso Punti di Giacenza - Fascicolo Chiuso
              - __RECRS004C__- [RS] - [OK] - Mancata consegna presso Punti di Giacenza - Fascicolo Chiuso
              - __RECRS005C__- [RS] - [OK] - Compiuta giacenza - Fascicolo Chiuso
              - __RECRS006__- [RS] - [PROGRESS] - Furto/Smarrimento/deterioramento
              - __RECRN001C__- [AR] - [OK] - Consegnato - Fascicolo Chiuso
              - __RECRN002C__- [AR] - [KO] - Mancata consegna - Fascicolo Chiuso
              - __RECRN002F__- [AR] - [KO] - Irreperibilità Assoluta - Fascicolo Chiuso
              - __RECRN003C__- [AR] - [OK] - Consegnato presso Punti di Giacenza - Fascicolo Chiuso
              - __RECRN004C__- [AR] - [KO] - Mancata consegna presso Punti di Giacenza - Fascicolo Chiuso
              - __RECRN005C__- [AR] - [OK] - Compiuta giacenza - Fascicolo Chiuso
              - __RECRN006__- [AR] - [PROGRESS] - Furto/Smarrimento/deterioramento
              - __RECAG001C__- [890] - [OK] - Consegnato - Fascicolo Chiuso
              - __RECAG002C__- [890] - [OK] - Consegnato a persona abilitata - Fascicolo Chiuso
              - __RECAG003C__- [890] - [KO] - Mancata consegna - Fascicolo Chiuso
              - __RECAG003F__- [890] - [KO] - Irreperibilità Assoluta - Fascicolo Chiuso
              - __RECAG004__- [890] - [PROGRESS] - Furto/Smarrimento/deterioramento
              - __RECAG005C__- [890] - [OK | PROGRESS] - Consegnato presso Punti di Giacenza - Fascicolo Chiuso
              - __RECAG006C__- [890] - [OK | PROGRESS] - Consegna a persona abilitata presso Punti di Giacenza - Fas. Ch.
              - __RECAG007C__- [890] - [KO | PROGRESS] - Mancata consegna presso Punti di Giacenza - Fascicolo Chiuso
              - __RECAG008C__- [890] - [PROGRESS] - Compiuta giacenza - Fascicolo Chiuso
              - __PNAG012__- [890] - [KO] - Distacco d'ufficio 23L - Fascicolo Chiuso
              - __RECRI003C__- [RIR] - [OK] - Consegnato - Fascicolo Chiuso
              - __RECRI004C__- [RIR] - [KO] - Non Consegnato - fascicolo Chiuso
              - __RECRI005__- [RIR] - [PROGRESS] - Furto/Smarrimento/deterioramento
              - __RECRSI003C__- [RIS] - [OK] - Consegnato - Fascicolo Chiuso
              - __RECRSI004C__- [RIS] - [KO] - Non Consegnato - fascicolo Chiuso
              - __RECRSI005__- [RIS] - [PROGRESS] - Furto/Smarrimento/deterioramento
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/AttachmentDetails'
        sendRequestId:
          type: string
          description: RequestId della richiesta d'invio
          maxLength: 512
        registeredLetterCode:
          type: string
          description: Codice della raccomandata
          maxLength: 128
    BaseRegisteredLetterDetails:
      type: object
      required:
        - recIndex
        - physicalAddress
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
    SimpleRegisteredLetterDetails:
      type: object
      required:
        - recIndex
        - physicalAddress
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        productType:
          type: string
          maxLength: 10
          description: |
            Tipo di invio cartaceo effettivamente inviato
              - __RS__: Raccomandata nazionale Semplice (per Avviso di mancato Recapito)
              - __RIS__: Raccomandata internazionale Semplice
        analogCost:
          type: number
          description: costo in eurocent dell'invio
        numberOfPages:
          type: number
          description: numero delle pagina che compongono la spedizione cartacea
        envelopeWeight:
          type: number
          description: peso in grammi della busta
        prepareRequestId:
          type: string
          description: request id della relativa richiesta di prepare
          maxLength: 512
    AarCreationRequestDetails:
      type: object
      required:
        - recIndex
        - aarKey
        - numberOfPages
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        aarKey:
          type: string
          description: Chiave per recupero da safe-storage del documento aar
          maxLength: 128
        numberOfPages:
          type: number
          description: numero di pagine del PDF generato
    AarGenerationDetails:
      type: object
      required:
        - recIndex
        - generatedAarUrl
        - numberOfPages
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        generatedAarUrl:
          type: string
          description: Chiave per recupero da safe-storage del documento aar
          maxLength: 128
        numberOfPages:
          type: number
          description: numero di pagine del PDF generato
    NotHandledDetails:
      type: object
      required:
        - recIndex
        - reasonCode
        - reason
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        reasonCode:
          type: string
          description: Codice motivazione casistica non gestita
          maxLength: 10
        reason:
          type: string
          description: Motivazione casistica non gestita
          maxLength: 2048
    NotificationPaidDetailsV23:
      type: object
      required:
        - recIndex
        - recipientType
        - paymentSourceChannel
      properties:
        recIndex:
          type: number
          description: Index destinatario che ha effettuato il pagamento della notifica
        recipientType:
          $ref: '#/components/schemas/RecipientType'
        amount:
          type: number
          description: Importo di pagamento in eurocent
        creditorTaxId:
          $ref: '#/components/schemas/paTaxId'
        noticeCode:
          $ref: '#/components/schemas/noticeCode'
        idF24:
          type: string
          description: un UUID che identifica un pagamento f24
          maxLength: 512
        paymentSourceChannel:
          type: string
          description: Canale sorgente della richiesta di pagamento
          maxLength: 512
        uncertainPaymentDate:
          deprecated: true
          type: boolean
          description: Indica se la data di pagamento é certa
        eventTimestamp:
          type: string
          description: Data evento pagamento
          format: date-time
    SendAnalogProgressDetailsV23:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario che ha effettuato il pagamento della notifica
        notificationDate:
          type: string
          format: date-time
        deliveryFailureCause:
          type: string
          maxLength: 10
          description: Vedi deliveryFailureCause in SendAnalogFeedbackDetails
        deliveryDetailCode:
          type: string
          maxLength: 20
          description: Vedi deliveryDetailCode in SendAnalogFeedbackDetails
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/AttachmentDetails'
        sendRequestId:
          type: string
          description: RequestId della richiesta d'invio
          maxLength: 512
        registeredLetterCode:
          type: string
          description: Codice della raccomandata
          maxLength: 128
        serviceLevel:
          $ref: '#/components/schemas/ServiceLevel'
    SimpleRegisteredLetterProgressDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario che ha effettuato il pagamento della notifica
        notificationDate:
          type: string
          format: date-time
        deliveryFailureCause:
          type: string
          maxLength: 10
          description: Vedi deliveryFailureCause in SendAnalogFeedbackDetails
        deliveryDetailCode:
          type: string
          maxLength: 20
          description: Vedi deliveryDetailCode in SendAnalogFeedbackDetails
        attachments:
          type: array
          items:
            $ref: '#/components/schemas/AttachmentDetails'
        sendRequestId:
          type: string
          description: RequestId della richiesta d'invio
          maxLength: 512
        registeredLetterCode:
          type: string
          description: Codice della raccomandata
          maxLength: 128
    ProbableDateAnalogWorkflowDetails:
      type: object
      required:
        - recIndex
        - schedulingAnalogDate
      properties:
        recIndex:
          type: number
          description: Index destinatario che ha effettuato il pagamento della notifica
        schedulingAnalogDate:
          type: string
          format: date-time
          description: Data probabile di inizio del flusso analogico
    NotificationCancellationRequestDetails:
      type: object
      required:
        - cancellationRequestId
      properties:
        cancellationRequestId:
          type: string
          description: Id della richiesta
          maxLength: 512
    NotificationCancelledDetails:
      type: object
      required:
        - notificationCost
        - notRefinedRecipientIndexes
      properties:
        notificationCost:
          description: >-
            costo notifica in euro cents, vale 100 * numero di recipient not
            refined
          example: 1220
          type: number
        notRefinedRecipientIndexes:
          type: array
          items:
            description: indice del recipient non perfezionato
            type: number
    PrepareAnalogDomicileFailureDetails:
      type: object
      required:
        - recIndex
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        foundAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        failureCause:
          type: string
          maxLength: 10
          description: |
            __Motivazione fallimento prepare
              - __D00__ Indirizzo non trovato
              - __D01__ Indirizzo non valido
              - __D02__ Indirizzo coincidente con quello del primo tentativo
        prepareRequestId:
          type: string
          description: RequestId della richiesta di prepare
          maxLength: 512
    AnalogWorkflowRecipientDeceasedDetailsV26:
      type: object
      required:
        - recIndex
        - physicalAddress
      properties:
        recIndex:
          type: number
          description: Index destinatario notifica digitale
        physicalAddress:
          $ref: '#/components/schemas/PhysicalAddress'
        notificationCost:
          description: >-
            costo notifica in euro cents, può essere nullo se la notifica è
            stata precedentemente visualizzata
          example: 1220
          type: number
    TimelineElementDetailsV26:
      description: The raw event payload that will be different based on the event.
      oneOf:
        - $ref: '#/components/schemas/SenderAckCreationRequestDetails'
        - $ref: '#/components/schemas/NormalizedAddressDetails'
        - $ref: '#/components/schemas/NotificationRequestAcceptedDetails'
        - $ref: '#/components/schemas/AnalogFailureWorkflowDetails'
        - $ref: '#/components/schemas/AnalogSuccessWorkflowDetails'
        - $ref: '#/components/schemas/CompletelyUnreachableCreationRequestDetails'
        - $ref: '#/components/schemas/CompletelyUnreachableDetails'
        - $ref: '#/components/schemas/DigitalDeliveryCreationRequestDetails'
        - $ref: '#/components/schemas/DigitalFailureWorkflowDetails'
        - $ref: '#/components/schemas/DigitalSuccessWorkflowDetails'
        - $ref: '#/components/schemas/GetAddressInfoDetails'
        - $ref: '#/components/schemas/NotificationViewedCreationRequestDetailsV23'
        - $ref: '#/components/schemas/NotificationViewedDetailsV23'
        - $ref: '#/components/schemas/NotificationRADDRetrievedDetails'
        - $ref: '#/components/schemas/PublicRegistryCallDetails'
        - $ref: '#/components/schemas/PublicRegistryResponseDetails'
        - $ref: '#/components/schemas/RefinementDetailsV23'
        - $ref: '#/components/schemas/RequestRefusedDetailsV25'
        - $ref: '#/components/schemas/ScheduleAnalogWorkflowDetailsV23'
        - $ref: '#/components/schemas/ScheduleDigitalWorkflowDetailsV23'
        - $ref: '#/components/schemas/ScheduleRefinementDetails'
        - $ref: '#/components/schemas/SendCourtesyMessageDetails'
        - $ref: '#/components/schemas/PrepareDigitalDetails'
        - $ref: '#/components/schemas/SendDigitalDetails'
        - $ref: '#/components/schemas/SendDigitalFeedbackDetails'
        - $ref: '#/components/schemas/SendDigitalProgressDetailsV23'
        - $ref: '#/components/schemas/BaseAnalogDetails'
        - $ref: '#/components/schemas/SendAnalogDetails'
        - $ref: '#/components/schemas/SendAnalogFeedbackDetailsV25'
        - $ref: '#/components/schemas/BaseRegisteredLetterDetails'
        - $ref: '#/components/schemas/SimpleRegisteredLetterDetails'
        - $ref: '#/components/schemas/AarCreationRequestDetails'
        - $ref: '#/components/schemas/AarGenerationDetails'
        - $ref: '#/components/schemas/NotHandledDetails'
        - $ref: '#/components/schemas/NotificationPaidDetailsV23'
        - $ref: '#/components/schemas/SendAnalogProgressDetailsV23'
        - $ref: '#/components/schemas/SimpleRegisteredLetterProgressDetails'
        - $ref: '#/components/schemas/ProbableDateAnalogWorkflowDetails'
        - $ref: '#/components/schemas/NotificationCancellationRequestDetails'
        - $ref: '#/components/schemas/NotificationCancelledDetails'
        - $ref: '#/components/schemas/PrepareAnalogDomicileFailureDetails'
        - $ref: '#/components/schemas/AnalogWorkflowRecipientDeceasedDetailsV26'
    BffNotificationDetailTimeline:
      type: object
      required:
        - elementId
        - timestamp
        - category
        - details
      additionalProperties: false
      properties:
        elementId:
          type: string
        timestamp:
          type: string
          format: date-time
        legalFactsIds:
          type: array
          items:
            $ref: '#/components/schemas/BffLegalFactId'
        category:
          $ref: '#/components/schemas/TimelineElementCategoryV26'
        details:
          $ref: '#/components/schemas/TimelineElementDetailsV26'
        hidden:
          type: boolean
        index:
          type: number
    BffNotificationDeliveryMode:
      type: string
      enum:
        - analog
        - digital
    BffNotificationStatusHistory:
      type: object
      additionalProperties: false
      required:
        - status
        - activeFrom
        - relatedTimelineElements
      properties:
        status:
          $ref: '#/components/schemas/BffNotificationStatus'
        activeFrom:
          type: string
          format: date-time
        relatedTimelineElements:
          type: array
          items:
            type: string
        steps:
          type: array
          items:
            $ref: '#/components/schemas/BffNotificationDetailTimeline'
        recipient:
          type: string
        deliveryMode:
          $ref: '#/components/schemas/BffNotificationDeliveryMode'
    BffDocumentRecipientData:
      type: object
      required:
        - denomination
        - taxId
      properties:
        denomination:
          type: string
        taxId:
          type: string
    BffNotificationDetailDocument:
      description: Documento della notifica.
      allOf:
        - $ref: '#/components/schemas/NotificationMetadataAttachment'
        - type: object
          properties:
            title:
              type: string
              minLength: 1
              maxLength: 512
              pattern: ^.*$
            requiresAck:
              type: string
            docIdx:
              type: string
              maxLength: 3
              pattern: ^\d+$
            documentId:
              type: string
            documentType:
              type: string
            recIndex:
              type: number
            recipient:
              $ref: '#/components/schemas/BffDocumentRecipientData'
    BffFullNotificationV1:
      description: Dettaglio notifica con elementi per il Frontend
      allOf:
        - $ref: '#/components/schemas/SentNotificationV24'
        - type: object
          required:
            - notificationStatusHistory
            - notificationStatus
            - timeline
          properties:
            notificationStatusHistory:
              type: array
              items:
                $ref: '#/components/schemas/BffNotificationStatusHistory'
            notificationStatus:
              $ref: '#/components/schemas/BffNotificationStatus'
            timeline:
              type: array
              items:
                $ref: '#/components/schemas/BffNotificationDetailTimeline'
            radd:
              $ref: '#/components/schemas/BffNotificationDetailTimeline'
            otherDocuments:
              type: array
              items:
                $ref: '#/components/schemas/BffNotificationDetailDocument'
    BffDocumentType:
      type: string
      enum:
        - ATTACHMENT
        - LEGAL_FACT
        - AAR
    BffDocumentDownloadMetadataResponse:
      type: object
      required:
        - filename
        - contentLength
      properties:
        filename:
          type: string
        contentLength:
          type: number
          format: decimal32
          description: dimensione, in byte, del contenuto.
        url:
          type: string
          description: >-
            URL pre-autorizzato a cui effettuare una richiesta GET per ottenere
            il  contenuto del documento. Presente solo se il documento è pronto
            per il download.
        retryAfter:
          type: number
          format: decimal32
          description: >-
            Stima del numero di secondi da aspettare prima che il contenuto del 
            documento sia scaricabile.
    StatusDetail:
      description: Detail of response to cancellation async call
      type: object
      required:
        - code
      properties:
        code:
          description: Internal code of the error or warning, in human-readable format
          example: NOTIFICATION_CANCELLATION_ACCEPTED, NOTIFICATION_ALREADY_CANCELLED
          type: string
        level:
          description: |
            informational level of status detail: INFO,WARN, ERR
            ERR (error) by default
          example: INFO
          type: string
        detail:
          description: >-
            A human readable explanation specific to this occurrence of the
            problem.
          example: Parameter not valid
          type: string
    RequestStatus:
      description: Response to cancellation async call
      type: object
      properties:
        status:
          description: |
            Cancellation request status:
              - OK
          type: string
        details:
          type: array
          maxItems: 9999
          items:
            $ref: '#/components/schemas/StatusDetail'
      required:
        - status
    PreLoadRequest:
      title: Richiesta di precaricamento di un File
      type: object
      required:
        - sha256
      properties:
        preloadIdx:
          title: Id della richiesta di precaricamento di un file
          description: >-
            Identificativo univoco all'interno della request HTTP, serve per
            correlare la risposta. Stringa alfanumerica con caratteri
            utilizzabili in un nome file.
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9._-]{1,512}$
        contentType:
          title: MIME type del file che verrà caricato
          description: >-
            Il MIME type dell'allegato che dovrà essere caricato. Attualmente
            sono supportati
              - application/pdf
              - application/json
          type: string
          minLength: 15
          maxLength: 16
          pattern: ^application\/(pdf|json)$
        sha256:
          title: checksum sha256 del file che verrà caricato
          description: >-
            checksum sha256, codificato in base 64, del contenuto binario del
            file che verrà caricato
          type: string
          example: jezIVxlG1M1woCSUngM6KipUN3/p8cG5RMIPnuEanlE=
          minLength: 44
          maxLength: 44
          pattern: ^[A-Za-z0-9+\/]{43}=|[A-Za-z0-9+\/]{44}$
    PreLoadResponse:
      title: Informazioni per il caricamento file
      description: >-
        Per ogni richiesta che è stata fatta viene fornito un presigned URL e
        le  informazioni per usarlo.
      type: object
      properties:
        preloadIdx:
          description: >-
            per correlazione con la richiesta. Stringa alfanumerica con
            caratteri utilizzabili in un file.
          type: string
          minLength: 1
          maxLength: 512
          pattern: ^[a-zA-Z0-9._-]{1,512}$
        secret:
          description: >-
            Token aggiuntivo per far si che sia necessario intercettare anche
            gli  header e non solo l'URL di upload del contenuto del documento.
          example: AZ23RF12
          type: string
        httpMethod:
          description: >-
            Indica se per l'upload del contenuto file bisogna utilizzare il
            metodo PUT o POST
          type: string
          example: PUT
          enum:
            - POST
            - PUT
        url:
          description: URL a cui effettuare l'upload del contenuto del documento.
          type: string
          example: https://preloadpn.aws.amazon.......
        key:
          description: >-
            la chiave restituita sarà globalmente unica e andrà utilizzata nella
            richiesta  di notifica.
          example: PN_NOTIFICATION_ATTACHMENTS-0001-301W-B9CB-9U72-WIKD
          type: string
    RequestCheckAarMandateDto:
      description: Le informazioni fornite per verificare l'AAR-QR-CodeValue
      type: object
      required:
        - aarQrCodeValue
      properties:
        aarQrCodeValue:
          type: string
          description: valore del token QR-Code presente sull'avviso di avvenuta ricezione
          pattern: ^[A-Za-z0-9_-]*$
          minLength: 106
          maxLength: 136
    ResponseCheckAarMandateDto:
      description: >-
        Le informazioni fornite in risposta alla verifica del AAR-QR-CodeValue
        con possibile identificativo della delega attiva
      type: object
      required:
        - iun
      properties:
        iun:
          $ref: '#/components/schemas/IUN'
        mandateId:
          description: identificativo della delega
          type: string
    BffApiKeyGroup:
      description: Gruppo a cui appartiene l'api key
      type: object
      properties:
        id:
          type: string
          description: id del gruppo
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        name:
          type: string
          description: nome del gruppo
          x-field-extra-annotation: '@lombok.ToString.Exclude'
    BffApiKeyStatus:
      description: Stato dell'api key
      type: string
      enum:
        - CREATED
        - ENABLED
        - BLOCKED
        - ROTATED
    BffApiKeyStatusHistory:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/BffApiKeyStatus'
        date:
          type: string
          description: data a cui corrisponde il cambio di stato
          format: date-time
        changedByDenomination:
          type: string
          description: nome dell'utente che ha effettuato il cambio di stato
    BffApiKeyRow:
      type: object
      properties:
        id:
          type: string
          description: Id dell'api key
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        name:
          type: string
          description: Nome dell'api key
        value:
          type: string
          description: Valore dell'api key
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        lastUpdate:
          type: string
          description: Data ultima modifica
          format: date-time
        groups:
          type: array
          items:
            $ref: '#/components/schemas/BffApiKeyGroup'
        status:
          $ref: '#/components/schemas/BffApiKeyStatus'
        statusHistory:
          type: array
          description: Storico degli stati dell'api key
          items:
            $ref: '#/components/schemas/BffApiKeyStatusHistory'
    BffApiKeysResponse:
      title: Elenco di api keys
      description: Dto contenente la lista delle api keys associate ad un utente.
      type: object
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/BffApiKeyRow'
        lastKey:
          type: string
        lastUpdate:
          type: string
        total:
          type: number
    RequestNewApiKey:
      title: Request creazione api key
      description: Request per la creazione di una nuova api key
      type: object
      required:
        - name
        - groups
      properties:
        name:
          type: string
          pattern: ^\S.*\S$
          description: nome dell'api key
        groups:
          type: array
          description: Gruppi a cui appartiene l'api key (indicare l'id dei gruppi)
          items:
            type: string
    ResponseNewApiKey:
      title: Response creazione api key
      description: Response per la creazione di una nuova api key
      type: object
      required:
        - id
        - apiKey
      properties:
        id:
          type: string
          description: id dell'api key appena generata
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        apiKey:
          type: string
          description: Valore dell'api key appena generata
          x-field-extra-annotation: '@lombok.ToString.Exclude'
    RequestApiKeyStatus:
      title: Richiesta di cambio stato per una api key
      description: Richiesta di cambio stato per una api key
      type: object
      required:
        - status
      properties:
        status:
          type: string
          description: Action per il cambio stato di un'api key
          enum:
            - BLOCK
            - ENABLE
            - ROTATE
    PublicKeyStatus:
      description: Stato della public key
      type: string
      enum:
        - CREATED
        - ACTIVE
        - ROTATED
        - BLOCKED
        - DELETED
    PublicKeyStatusHistory:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/PublicKeyStatus'
        date:
          type: string
          description: data a cui corrisponde il cambio di stato
          format: date-time
        changedByDenomination:
          type: string
          description: nome dell'utente che ha effettuato il cambio di stato
    PublicKeyRow:
      type: object
      properties:
        kid:
          type: string
          description: Id della public key
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        issuer:
          type: string
          description: Issuer della public key
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        name:
          type: string
          description: Nome della public key
        value:
          type: string
          description: >-
            Valore dell public key restituito solo se il query param
            showPublicKey == True
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        createdAt:
          type: string
          description: Data censimento public key
          format: date-time
        status:
          $ref: '#/components/schemas/PublicKeyStatus'
        statusHistory:
          type: array
          description: Storico degli stati delle public key
          items:
            $ref: '#/components/schemas/PublicKeyStatusHistory'
    PublicKeysResponse:
      title: Elenco di public keys
      description: Dto contenente la lista delle public keys associate ad una pg.
      type: object
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/PublicKeyRow'
        lastKey:
          type: string
        createdAt:
          type: string
        total:
          type: number
    PublicKeyRequest:
      title: Richiesta di censimento nuova public key
      description: Request per il censimento di una nuova public key
      type: object
      required:
        - publicKey
      properties:
        name:
          type: string
          description: nome della public key
          maxLength: 254
          pattern: ^[a-zA-Z0-9-\s]+$
        publicKey:
          type: string
          description: Valore della public key (esclusi header e footer)
          maxLength: 500
        exponent:
          type: string
          description: Esponente della public key
          default: AQAB
        algorithm:
          description: Algoritmo di crittografia usato per la generazione della public key
          type: string
          enum:
            - RSA
          default: RSA
        keySize:
          description: Dimensione della chiave
          type: number
          enum:
            - 2048
          default: 2048
    PublicKeyResponse:
      title: Response censimento public key
      description: Response del censimento di una nuova public key
      type: object
      required:
        - kid
        - issuer
      properties:
        kid:
          type: string
          description: >-
            Kid della public key caricata da utilizzare nell'header kid del
            token JWT
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        issuer:
          type: string
          description: >-
            Valore dell'issuer per la key caricata da utilizzare nel claims iss
            del token JWT
    PublicKeysIssuerResponse:
      title: Verifica esistenza issuer
      description: Dto contenente la verifica dell'esistenza di un issuer
      type: object
      properties:
        isPresent:
          type: boolean
        issuerStatus:
          description: Stato dell'issuer
          type: string
          enum:
            - ACTIVE
            - INACTIVE
    BffPublicKeysCheckIssuerResponse:
      type: object
      required:
        - issuer
        - tosAccepted
      properties:
        issuer:
          $ref: '#/components/schemas/PublicKeysIssuerResponse'
        tosAccepted:
          type: boolean
    UserDto:
      description: Available only for request where requesting user is the delegator
      oneOf:
        - type: object
          properties:
            displayName:
              type: string
              x-field-extra-annotation: '@lombok.ToString.Exclude'
              maxLength: 80
              pattern: ^([\x20-\xFF]{1,80})$
            firstName:
              type: string
              x-field-extra-annotation: '@lombok.ToString.Exclude'
              maxLength: 80
              pattern: ^([\x20-\xFF]{1,80})$
            lastName:
              type: string
              x-field-extra-annotation: '@lombok.ToString.Exclude'
              maxLength: 80
              pattern: ^([\x20-\xFF]{1,80})$
            companyName:
              type: string
              x-field-extra-annotation: '@lombok.ToString.Exclude'
              maxLength: 250
              pattern: ^([\x20-\xFF]{1,250})$
            fiscalCode:
              type: string
              x-field-extra-annotation: '@lombok.ToString.Exclude'
              maxLength: 16
              pattern: >-
                ^([A-Z]{6}[0-9LMNPQRSTUV]{2}[A-Z]{1}[0-9LMNPQRSTUV]{2}[A-Z]{1}[0-9LMNPQRSTUV]{3}[A-Z]{1})|([0-9]{11})$
            person:
              type: boolean
        - type: 'null'
    VirtualKeyStatus:
      description: Stato della virtual key
      type: string
      enum:
        - CREATED
        - ENABLED
        - BLOCKED
        - ROTATED
        - DELETED
    VirtualKey:
      type: object
      properties:
        id:
          type: string
          description: Id della virtual key
        name:
          type: string
          description: Nome della virtual key
        value:
          type: string
          description: Valore della virtual key
        lastUpdate:
          type: string
          description: Data ultima modifica
          format: date-time
        user:
          type: object
          $ref: '#/components/schemas/UserDto'
        status:
          $ref: '#/components/schemas/VirtualKeyStatus'
    VirtualKeysResponse:
      title: Elenco di virtual keys
      description: Dto contenente la lista delle virtual keys associate ad un utente.
      type: object
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/VirtualKey'
        lastKey:
          type: string
        lastUpdate:
          type: string
        total:
          type: number
    RequestNewVirtualKey:
      title: Request creazione virtual key
      description: Request per la creazione di una nuova virtual key
      type: object
      required:
        - name
      properties:
        name:
          type: string
          pattern: ^\S.*\S$
          description: nome della virtual key
    ResponseNewVirtualKey:
      title: Response creazione virtual key
      description: Response per la creazione di una nuova virtual key
      type: object
      required:
        - id
        - virtualKey
      properties:
        id:
          type: string
          description: id della virtual key appena generata
          x-field-extra-annotation: '@lombok.ToString.Exclude'
        virtualKey:
          type: string
          description: Valore della virtual key appena generata
          x-field-extra-annotation: '@lombok.ToString.Exclude'
    RequestVirtualKeyStatus:
      title: Richiesta di cambio stato per una virtual key
      description: Richiesta di cambio stato per una virtual key
      type: object
      required:
        - status
      properties:
        status:
          type: string
          description: Action per il cambio stato di una virtual key
          enum:
            - BLOCK
            - ENABLE
            - ROTATE
    BffInstitution:
      type: object
      required:
        - id
        - name
        - productRole
        - entityUrl
      properties:
        id:
          type: string
          description: The identifier of the institution
        name:
          type: string
          description: The name of the institution
        productRole:
          type: string
          description: The role of the product
        logoUrl:
          type: string
          description: The URL of the logo
        parentName:
          type: string
          description: The name of the parent institution
        entityUrl:
          type: string
          description: The URL of the entity
    BffInstitutionList:
      description: The list of institutions
      type: array
      items:
        $ref: '#/components/schemas/BffInstitution'
    BffInstitutionProduct:
      type: object
      required:
        - id
        - title
        - productUrl
      properties:
        id:
          type: string
          description: The identifier of the product
        title:
          type: string
          description: The title of the product
        productUrl:
          type: string
          description: The URL of the product
    BffInstitutionProductList:
      description: The list of products
      type: array
      items:
        $ref: '#/components/schemas/BffInstitutionProduct'
    PaGroupStatus:
      title: Status of group defined in Self Care
      description: Contains the name list of groups defined in SelfCare
      type: string
      enum:
        - ACTIVE
        - SUSPENDED
        - DELETED
    BffPaGroup:
      title: Group defined in Self Care
      description: Contains the name list of groups defined in SelfCare
      type: object
      properties:
        id:
          type: string
        name:
          type: string
    BffPaGroupList:
      title: Groups defined in Self Care
      description: Contains the list of groups defined in SelfCare
      type: array
      items:
        $ref: '#/components/schemas/BffPaGroup'
    BffAdditionalLanguages:
      title: Additional languages
      description: Contains the list of additional languages
      type: object
      required:
        - additionalLanguages
      properties:
        additionalLanguages:
          description: Array of an element containing the additional language
          type: array
          items:
            type: string
          example:
            - DE
    PgGroupStatus:
      title: Status of group defined in Self Care PG (Notifiche digitali)
      description: >-
        Contains the status of groups defined in SelfCare PG (Notifiche
        digitali)
      type: string
      enum:
        - ACTIVE
        - SUSPENDED
        - DELETED
    BffPgGroup:
      title: Group defined in Self Care PG (Notifiche digitali)
      description: >-
        Contains the name list of groups defined in SelfCare PG (Notifiche
        digitali)
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        status:
          $ref: '#/components/schemas/PgGroupStatus'
    BffPgGroupList:
      title: Groups defined in Self Care PG (Notifiche digitali)
      description: Contains the list of groups defined in SelfCare PG (Notifiche digitali)
      type: array
      items:
        $ref: '#/components/schemas/BffPgGroup'
    PaNameFilter:
      title: Admitted character for PA denomination field
      type: string
      minLength: 3
      maxLength: 250
      pattern: ^([\x20-\xFF]{1,250})$
    SelfCarePaId:
      title: The PA id used by self care
      description: An unique ID that identify a Public Administration
      type: string
      minLength: 1
      maxLength: 50
      pattern: ^[ -~ ]*$
    PaSummary:
      title: PA in short
      description: PA with minimal information
      type: object
      required:
        - id
        - name
      properties:
        id:
          $ref: '#/components/schemas/SelfCarePaId'
        name:
          type: string
    PaSummariesList:
      title: Brief list of PAs
      description: Contains a list of PA with minimal information
      type: array
      items:
        $ref: '#/components/schemas/PaSummary'
    ConsentType:
      type: string
      description: type of consent
      enum:
        - TOS
        - DATAPRIVACY
        - TOS_DEST_B2B
        - TOS_SERCQ
        - DATAPRIVACY_SERCQ
    ConsentVersion:
      type: string
      description: version of consent
      maxLength: 10
      pattern: ^[a-zA-Z0-9_.-]*$
    Consent:
      type: object
      required:
        - consentType
        - recipientId
        - consentVersion
      properties:
        recipientId:
          example: 123e4567-e89b-12d3-a456-426614174000
          type: string
        consentType:
          $ref: '#/components/schemas/ConsentType'
        accepted:
          type: boolean
        consentVersion:
          $ref: '#/components/schemas/ConsentVersion'
        isFirstAccept:
          type: boolean
    BffTosPrivacyConsent:
      type: array
      items:
        $ref: '#/components/schemas/Consent'
    ConsentAction:
      type: object
      properties:
        action:
          type: string
          description: action on consent
          enum:
            - ACCEPT
            - DECLINE
    BffTosPrivacyActionBody:
      required:
        - version
        - action
        - type
      allOf:
        - $ref: '#/components/schemas/ConsentAction'
        - type: object
          properties:
            version:
              $ref: '#/components/schemas/ConsentVersion'
            type:
              $ref: '#/components/schemas/ConsentType'
    BffTosPrivacyBody:
      type: array
      items:
        $ref: '#/components/schemas/BffTosPrivacyActionBody'
    BffPnStatusResponse:
      type: object
      required:
        - lastCheckTimestamp
        - appIsFullyOperative
      properties:
        lastCheckTimestamp:
          type: string
          description: data a cui corrisponde l'ultimo check sullo stato della piattaforma
          format: date-time
        appIsFullyOperative:
          type: boolean
          nullable: false
          description: Flag per indicare se l'applicazione è operativa
    PnFunctionality:
      title: Funzionalità di PN
      description: >-
        - __NOTIFICATION_CREATE__: la possibilità di creare nuove notifiche.

        - __NOTIFICATION_VISUALIZATION__: la possibilità di visualizzare le
        notifiche e scaricare gli atti. 

        - __NOTIFICATION_WORKFLOW__: l'avanzamento del processo di notifica. 
      type: string
      enum:
        - NOTIFICATION_CREATE
        - NOTIFICATION_VISUALIZATION
        - NOTIFICATION_WORKFLOW
      x-enum-varnames:
        - NOTIFICATION_CREATE
        - NOTIFICATION_VISUALIZATION
        - NOTIFICATION_WORKFLOW
    PnFunctionalityStatus:
      type: string
      enum:
        - KO
        - OK
    PnDowntimeEntry:
      title: Dati relativi ad un disservizio di PN.
      type: object
      required:
        - functionality
        - status
        - startDate
      properties:
        functionality:
          $ref: '#/components/schemas/PnFunctionality'
        status:
          $ref: '#/components/schemas/PnFunctionalityStatus'
        startDate:
          title: data inizio disservizio
          type: string
          format: date-time
        endDate:
          title: data fine disservizio
          description: >-
            se il disservizio è ancora attivo questo campo sarà assente o con
            valore _null_
          type: string
          format: date-time
        legalFactId:
          title: id dell'atto opponibile a terzi
          description: >-
            Se assente o valorizzato _null_ indica che l'atto opponibile a terzi
            non è ancora disponibile. Questo avviene per i disservizi ancora
            aperti e per i disservizi  terminati da pochi minuti. <br/> Questo
            valore è da utilizzare con l'API _getLegalFact_ di questo stesso
            servizio.
          type: string
        fileAvailable:
          type: boolean
        fileAvailableTimestamp:
          type: string
          format: date-time
          title: Momento di creazione dell'atto opponibile a terzi
          description: >-
            Momento di creazione dell'atto opponibile a terzi di
            malfunzionamento e ripristino.  Coincide con il momento in cui pn-ss
            comunica la disponibilitá dell'atto opponibile generato.
    PnDowntimeHistoryResponse:
      title: Elenco disservizi con paginazione
      description: Risposta a una query dello storico dei disservizi
      type: object
      required:
        - result
      properties:
        result:
          title: Elenco di disservizi
          type: array
          items:
            $ref: '#/components/schemas/PnDowntimeEntry'
        nextPage:
          title: prossima pagina di risultati
          description: >-
            Se questo attributo non è presente o valorizzato _null_ indica che
            la query eseguita non presenta ulteriori risultati. <br/> Se questo
            attributo è valorizzato indica che la query può contenere ulteriori 
            risultati. La richiesta va rieseguita inserendo nel parametro _page_
            il valore  di questo campo.
          type: string
    LegalFactDownloadMetadataResponse:
      title: Url e metadati per il download di un allegato di una notifica
      description: |-
        I due campi più importanti sono __url__ e __retryAfter__. <br/>
          - __url__ è presente se il file è pronto per essere scaricato ed indica l'url a cui fare GET. <br/>
          - __retryAfter__ indica che il file non è stato archiviato e bisognerà aspettare un numero di
            secondi non inferiore a quanto indicato dal campo _retryAfter_. <br/>
      type: object
      required:
        - filename
        - contentLength
      properties:
        filename:
          type: string
        contentLength:
          type: number
          example: 54092
          description: dimensione, in byte, del contenuto.
        url:
          type: string
          description: >-
            URL preautorizzato a cui effettuare una richiesta GET per ottenere
            il  contenuto del documento. Presente solo se il documento è pronto
            per il download.
        retryAfter:
          type: number
          description: >-
            Stima del numero di secondi da aspettare prima che il contenuto del 
            documento sia scaricabile.
    PaymentInfoRequest:
      title: Request for a payment info
      description: Object containing sender and payment id
      type: object
      properties:
        creditorTaxId:
          $ref: '#/components/schemas/paTaxId'
        noticeCode:
          $ref: '#/components/schemas/noticeCode'
      required:
        - creditorTaxId
        - noticeCode
    PaymentInfoRequests:
      title: Requests for payment info
      description: List of request payment info containing sender and payment id
      type: array
      minItems: 1
      items:
        $ref: '#/components/schemas/PaymentInfoRequest'
    PaymentStatus:
      title: Payment status
      example: REQUIRED
      description: |
        Payment status:
          * `REQUIRED` - payment required
          * `SUCCEEDED` - payment done
          * `IN_PROGRESS` - waiting confirm
          * `FAILURE` - error see errorType
      type: string
      enum:
        - REQUIRED
        - SUCCEEDED
        - IN_PROGRESS
        - FAILURE
    Detail:
      title: Error classification
      description: |
        Classification to help user address the issue
          * `PAYMENT_UNAVAILABLE`: Technical Error.
          * `PAYMENT_UNKNOWN`: Payment data error.
          * `DOMAIN_UNKNOWN`: creditor institution error.
          * `PAYMENT_ONGOING`: payment on going.
          * `PAYMENT_EXPIRED`: payment expired.
          * `PAYMENT_CANCELED`: payment cancelled.
          * `PAYMENT_DUPLICATED`: payment duplicated.
          * `GENERIC_ERROR`: generic error.
      example: PAYMENT_UNAVAILABLE
      type: string
      enum:
        - PAYMENT_UNAVAILABLE
        - PAYMENT_UNKNOWN
        - DOMAIN_UNKNOWN
        - PAYMENT_ONGOING
        - PAYMENT_EXPIRED
        - PAYMENT_CANCELED
        - PAYMENT_DUPLICATED
        - GENERIC_ERROR
    DetailV2:
      title: Error classification detail
      description: |
        Classification detail to help user address the issue
      example: PPT_PSP_SCONOSCIUTO
      type: string
    BffPaymentInfoItem:
      title: Payment brief information
      description: Payment minimal information
      type: object
      required:
        - status
        - creditorTaxId
        - noticeCode
      properties:
        creditorTaxId:
          $ref: '#/components/schemas/paTaxId'
        noticeCode:
          $ref: '#/components/schemas/noticeCode'
        status:
          $ref: '#/components/schemas/PaymentStatus'
        detail:
          $ref: '#/components/schemas/Detail'
        detail_v2:
          $ref: '#/components/schemas/DetailV2'
        errorCode:
          description: error code to show at the user
          type: string
        amount:
          description: Amount for required payment in euro-cents
          type: number
        causaleVersamento:
          description: reason for payment
          type: string
        dueDate:
          description: payment expiration date
          type: string
          pattern: ([0-9]{4})-(1[0-2]|0[1-9])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])
    BffPaymentInfoResponse:
      title: Response for payment info requests
      description: List of payment info
      type: array
      minItems: 1
      items:
        $ref: '#/components/schemas/BffPaymentInfoItem'
    PaymentNotice:
      title: Request for a Payment Notice
      description: Information of a Payment Notice
      type: object
      required:
        - noticeNumber
        - fiscalCode
        - amount
        - companyName
        - description
      properties:
        noticeNumber:
          type: string
          description: The payment notice number
          minLength: 18
          maxLength: 18
          pattern: ^\d+$
        fiscalCode:
          type: string
          description: Public Administration tax code
          minLength: 11
          maxLength: 11
          pattern: ^\d+$
        amount:
          type: number
          description: Amount ( in euro cents ) of the payment notice
          minimum: 1
        companyName:
          type: string
          description: Public Administration company name
          maxLength: 250
          pattern: ^([\x20-\xFF]{1,250})$
        description:
          type: string
          description: Subject of payment
          maxLength: 250
          pattern: ^([\x20-\xFF]{1,250})$
    PaymentRequest:
      title: Request to make a payment on Checkout
      type: object
      required:
        - paymentNotice
        - returnUrl
      properties:
        paymentNotice:
          $ref: '#/components/schemas/PaymentNotice'
        returnUrl:
          description: Checkout base url used to make payment
          example: https://api.uat.platform.pagopa.it/checkout/auth/payments/v2
          type: string
          maxLength: 2048
          pattern: ^[ -~ ]*$
    PaymentResponse:
      title: Response containing the Checkout callback URL
      type: object
      required:
        - checkoutUrl
      properties:
        checkoutUrl:
          type: string
          description: The Checkout callback URL
    BffChannelType:
      type: string
      enum:
        - EMAIL
        - SMS
        - PEC
        - APPIO
        - SERCQ_SEND
    BffUserAddress:
      type: object
      required:
        - addressType
        - recipientId
        - senderId
        - channelType
        - value
      properties:
        addressType:
          type: string
        senderId:
          type: string
          description: senderId or 'default'
        senderName:
          type: string
          description: name of the sender
        channelType:
          $ref: '#/components/schemas/BffChannelType'
        value:
          type: string
        codeValid:
          type: boolean
        pecValid:
          type: boolean
    BffUserAddresses:
      type: array
      items:
        $ref: '#/components/schemas/BffUserAddress'
    BffAddressType:
      type: string
      enum:
        - LEGAL
        - COURTESY
    VerificationCode:
      type: string
      description: Verification Code
      minLength: 5
      maxLength: 5
      pattern: ^\d{5}$
      example: '12345'
    AddressVerification:
      type: object
      description: richiede value oppure requestId di un indirizzo in corso di validazione
      properties:
        value:
          type: string
          x-field-extra-annotation: '@lombok.ToString.Exclude'
          maxLength: 254
          pattern: >-
            ^(((00|\+)393\d{8,9})|(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])|(ENABLED)|(DISABLED)|(APPIO)|([a-zA-Z0-9\-]+:[a-zA-Z0-9\-]+:[a-zA-Z0-9\-]+\??.*))$
        requestId:
          type: string
          maxLength: 64
          pattern: ^[ -~ ]*$
        verificationCode:
          $ref: '#/components/schemas/VerificationCode'
    AddressVerificationResponse:
      type: object
      required:
        - result
      properties:
        result:
          type: string
          description: >
            Uno dei seguenti valori - CODE_VERIFICATION_REQUIRED: indica che è
            richiesto il codice di verifica - PEC_VALIDATION_REQUIRED: indica
            che il codice di verifica inserito è valido, ma che non è ancora
            arrivata la conferma PEC (solo per la PEC)
          enum:
            - CODE_VERIFICATION_REQUIRED
            - PEC_VALIDATION_REQUIRED
    MandateCountsDto:
      type: object
      properties:
        value:
          type: number
    OrganizationIdDto:
      description: Available always, not required on mandate creation.
      oneOf:
        - type: object
          properties:
            name:
              type: string
              maxLength: 250
              pattern: ^([\x20-\xFF]{1,250})$
            uniqueIdentifier:
              type: string
              maxLength: 50
              pattern: ^[ -~ ]*$
        - type: 'null'
    GroupDto:
      type: object
      properties:
        id:
          type: string
          maxLength: 50
          pattern: ^[ -~ ]*$
        name:
          type: string
          maxLength: 80
          pattern: ^[ -~ ]*$
    BffNewMandateRequest:
      type: object
      required:
        - delegate
        - verificationCode
        - dateto
      properties:
        delegate:
          $ref: '#/components/schemas/UserDto'
        visibilityIds:
          description: Available always, not required on mandate creation.
          oneOf:
            - type: array
              items:
                $ref: '#/components/schemas/OrganizationIdDto'
            - type: 'null'
        verificationCode:
          description: Available only for request where requesting user is the delegator
          oneOf:
            - type: string
              maxLength: 5
              pattern: ^[0-9]*$
            - type: 'null'
        dateto:
          type: string
          description: ISO 8601 format
          maxLength: 10
          pattern: ^\d{4}\-(0[1-9]|1[012])\-(0[1-9]|[12][0-9]|3[01])$
        groups:
          type: array
          items:
            $ref: '#/components/schemas/GroupDto'
    AcceptRequestDto:
      type: object
      properties:
        verificationCode:
          type: string
          maxLength: 5
          pattern: ^[0-9]*$
        groups:
          type: array
          items:
            type: string
            maxLength: 80
            pattern: ^[ -~ ]*$
    UpdateRequestDto:
      type: object
      properties:
        groups:
          type: array
          maxItems: 10
          items:
            type: string
            maxLength: 39
            pattern: ^[ -~ ]*$
    MandateDto:
      type: object
      properties:
        mandateId:
          description: Available always, not required on mandate creation.
          oneOf:
            - type: string
              maxLength: 36
              pattern: >-
                ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$
            - type: 'null'
        delegator:
          $ref: '#/components/schemas/UserDto'
        delegate:
          $ref: '#/components/schemas/UserDto'
        status:
          description: Available always, not required on mandate creation.
          oneOf:
            - type: string
              enum:
                - pending
                - active
                - revoked
                - rejected
                - expired
            - type: 'null'
        visibilityIds:
          description: Available always, not required on mandate creation.
          oneOf:
            - type: array
              items:
                $ref: '#/components/schemas/OrganizationIdDto'
            - type: 'null'
        verificationCode:
          description: Available only for request where requesting user is the delegator
          oneOf:
            - type: string
              maxLength: 5
              pattern: ^[0-9]*$
            - type: 'null'
        datefrom:
          type: string
          description: ISO 8601 format
          maxLength: 10
          pattern: ^\d{4}\-(0[1-9]|1[012])\-(0[1-9]|[12][0-9]|3[01])$
        dateto:
          type: string
          description: ISO 8601 format
          maxLength: 10
          pattern: ^\d{4}\-(0[1-9]|1[012])\-(0[1-9]|[12][0-9]|3[01])$
        groups:
          type: array
          items:
            $ref: '#/components/schemas/GroupDto'
    SearchMandateRequestDto:
      type: object
      properties:
        taxId:
          type: string
          minLength: 11
          maxLength: 16
          pattern: >-
            ^[A-Z]{6}[0-9LMNPQRSTUV]{2}[A-Z]{1}[0-9LMNPQRSTUV]{2}[A-Z]{1}[0-9LMNPQRSTUV]{3}[A-Z]{1}$|^(IT)?[0-9]{11}$
        groups:
          type: array
          items:
            type: string
            maxLength: 80
            pattern: ^[ -~ ]*$
        status:
          type: array
          items:
            type: string
            maxLength: 10
            pattern: ^[A-Za-z]+$
    SearchMandateResponseDto:
      type: object
      properties:
        resultsPage:
          type: array
          items:
            $ref: '#/components/schemas/MandateDto'
        moreResult:
          description: Indica se sono presenti ulteriori pagine di risultati
          type: boolean
        nextPagesKey:
          description: >-
            Elenco, non esaustivo, delle chiavi da usare per richiedere le 
            pagine di risultati successive a quella corrente. <br/> Valorizzato
            solo se il campo __moreResult__ ha valore __true__.
          type: array
          items:
            type: string
    BffSenderDashboardNotificationOverview:
      type: object
      properties:
        sender_id:
          description: ID Ente
          type: string
        notification_send_date:
          description: YYYY-MM-DD invio delle notifiche
          type: string
          format: date
          example: '2023-12-06'
        notification_request_status:
          description: |-
            Stato richiesta notifica:
              - __'ACCEPTED'__
              - __'REFUSED'__
          type: string
          example: ACCEPTED
        notification_status:
          description: |-
            Ultimo stato della notifica:
              - __'REFUSED'__
              - __'ACCEPETED'__
              - __'CANCELLED'__
              - __'DELIVERED'__
              - __'DELIVERING'__
              - __'EFFECTIVE_DATE'__
              - __'UNREACHABLE'__
              - __'VIEWED'__
          type: string
          example: VIEWED
        notification_type:
          description: |-
            Tipo di notifica:
              - __'DIGITAL'__
              - __'ANALOGIC'__
              - __'-'__
          type: string
          example: DIGITAL
        status_digital_delivery:
          description: |-
            Esito invio notifica digitale:
              - __'OK'__
              - __'KO'__
              - __'IN CORSO'__
              - __'-'__
          type: string
          example: OK
        notification_delivered:
          description: Notifica consegnata __'SI'__ o __'NO'__
          type: string
          example: SI
        notification_viewed:
          description: Notifica visionata __'SI'__ o __'NO'__
          type: string
          example: SI
        notification_refined:
          description: Notifica perfezionata __'SI'__ o __'NO'__
          type: string
          example: SI
        attempt_count_per_digital_notification:
          description: Numero di tentativi notifica digitale
          type: number
          minimum: 0
          maximum: 8
          example: 0
        notifications_count:
          description: Numero Notifiche
          type: number
          minimum: 0
          example: 2
        delivery_time:
          description: Tempo di consegna in ore
          type: number
          format: double
          minimum: 0
          example: 0.11
        view_time:
          description: Tempo di visualizzazione in ore
          type: number
          format: double
          minimum: 0
          example: 2.76
        refinement_time:
          description: Tempo di perfezionamento in ore
          type: number
          format: double
          minimum: 0
          example: 4.77
        validation_time:
          description: Tempo di validazione in ore
          type: number
          format: double
          minimum: 0
          example: 2.01
    BffSenderDashboardDigitalNotificationFocus:
      type: object
      properties:
        sender_id:
          description: ID Ente
          type: string
        notification_send_date:
          description: YYYY-MM-DD invio delle notifiche
          type: string
          format: date
          example: '2023-12-06'
        error_type:
          description: |-
            Tipo di errore:
              - __'ERRORE DOMINIO PEC NON VALIDO'__
              - __'ERRORE CONSEGNA'__
              - __'NON ACCETTAZIONE'__
              - __'-'__
          type: string
          example: ERRORE DOMINIO PEC NON VALIDO
        failed_attempts_count:
          type: number
          example: 1
        notifications_count:
          type: number
          minimum: 0
          example: 4
    BffSenderDashboardDataResponse:
      type: object
      properties:
        senderId:
          type: string
          description: Unique identifier for the sender
        genTimestamp:
          description: Index generation date and time referred to UTC
          example: '2022-07-27T12:22:33.444Z'
          type: string
          format: date-time
        lastDate:
          description: YYYY-MM-DD last date on DL files
          type: string
          format: date
          example: '2023-12-06'
        startDate:
          description: YYYY-MM-DD start date
          type: string
          format: date
          example: '2023-12-06'
        endDate:
          description: YYYY-MM-DD end date (included)
          type: string
          format: date
          example: '2023-12-06'
        notificationsOverview:
          type: array
          items:
            $ref: '#/components/schemas/BffSenderDashboardNotificationOverview'
        digitalNotificationFocus:
          type: array
          items:
            $ref: '#/components/schemas/BffSenderDashboardDigitalNotificationFocus'
  responses: {}
  securitySchemes:
    pn-auth-fleet_jwtAuthorizer_openapi:
      type: apiKey
      name: Authorization
      in: header
      x-amazon-apigateway-authtype: custom
      x-amazon-apigateway-authorizer:
        authorizerUri: >-
          arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pn-jwtAuthorizerLambda/invocations
        authorizerResultTtlInSeconds: 300
        identityValidationExpression: ^Bearer\s([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.([a-zA-Z0-9_\-]+)$
        type: token
tags:
  - name: NotificationSent
    description: >-
      Invocazioni utilizzabili dai mittenti per verificare lo stato delle
      richieste  di notifica inviate e delle notifiche accettate.
  - name: NotificationReceived
    description: >-
      Invocazioni utilizzate dai destinatari per ottenere informazioni sulle
      notifiche a loro destinate.
  - name: ApiKeys
    description: Invocazioni utilizzabili dai mittenti per la gestione delle api keys
  - name: PublicKeys
    description: >-
      Invocazioni utilizzabili dalle PG destinatarie per la gestione delle
      public keys
  - name: VirtualKeys
    description: Gestione delle virtual keys per gli utenti e amministratori
  - name: InfoPa
    description: Invocazioni per sapere i portali disponibili di un ente
  - name: InfoRecipient
    description: >-
      Invocazioni per sapere i gruppi disponibili di un ente e le PA che usano
      PN
  - name: UserConsents
    description: Invocazioni per sapere lo stato di accettazione dei TOS e della Privacy
  - name: Downtime
    description: >-
      Invocazioni utilizzabili dai mittenti per la visualizzazione dello stato
      dei servizi
  - name: Payments
    description: >-
      Invocazioni utilizzate per il recupero delle informazioni relativi ai
      pagamenti.
  - name: Addresses
    description: Gestione dei recapiti
  - name: Mandate
    description: Invocazioni utilizzate per la gestione delle deleghe.
  - name: SenderDashboard
    description: Invocazioni per il recupero dei dati da mostrare nella dashboard mittenti.
x-amazon-apigateway-gateway-responses:
  DEFAULT_5XX:
    responseParameters:
      gatewayresponse.header.Access-Control-Allow-Origin: '''*'''
  DEFAULT_4XX:
    responseParameters:
      gatewayresponse.header.Access-Control-Allow-Origin: '''*'''
  BAD_REQUEST_PARAMETERS:
    responseParameters:
      gatewayresponse.header.Access-Control-Allow-Origin: '''*'''
      gatewayresponse.header.Access-Control-Expose-Headers: '''x-amzn-trace-id'''
    responseTemplates:
      application/json: >-
        {"status": 400, "title": "VALIDATION ERROR", "traceId":
        "$context.xrayTraceId", "errors": [ { "code": "PN_INVALID_PARAMETERS",
        "detail": "Validation errors: $context.error.validationErrorString" } ]}
  BAD_REQUEST_BODY:
    responseParameters:
      gatewayresponse.header.Access-Control-Allow-Origin: '''*'''
      gatewayresponse.header.Access-Control-Expose-Headers: '''x-amzn-trace-id'''
    responseTemplates:
      application/json: >-
        {"status": 400, "title": "VALIDATION ERROR", "traceId":
        "$context.xrayTraceId", "errors": [ { "code": "PN_INVALID_BODY",
        "detail": "Validation errors: $context.error.validationErrorString" } ]}
x-amazon-apigateway-request-validators:
  basic:
    validateRequestBody: true
    validateRequestParameters: true
  params-only:
    validateRequestBody: false
    validateRequestParameters: true
x-amazon-apigateway-request-validator: basic
