info:
  version: v1.0
components:
  schemas:

    BffPaymentInfoRequest:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-external-registries/b3cbe5b1f9cdb4af800355f780414fd02412fde8/docs/openapi/pn-payment-info-internal-v1.yaml#/components/schemas/PaymentInfoRequests'

    BffPaymentInfoResponse:
      title: Response for payment info requests
      description: List of payment info
      type: array
      minItems: 1
      items:
        $ref: '#/components/schemas/BffPaymentInfoItem'

    BffPaymentInfoItem:
      title: Payment brief information
      description: Payment minimal information
      type: object
      required:
        - status
        - creditorTaxId
        - noticeCode
      properties:
        creditorTaxId:
          $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/852015ad7e565bd95a6fcf96115c7673d64316a7/docs/openapi/schemas-pn-notification.yaml#/components/schemas/paTaxId'
        noticeCode:
          $ref: 'https://raw.githubusercontent.com/pagopa/pn-delivery/852015ad7e565bd95a6fcf96115c7673d64316a7/docs/openapi/schemas-pn-notification.yaml#/components/schemas/noticeCode'
        status:
          $ref: 'https://raw.githubusercontent.com/pagopa/pn-external-registries/b3cbe5b1f9cdb4af800355f780414fd02412fde8/docs/openapi/pn-payment-info-internal-v1.yaml#/components/schemas/PaymentStatus'
        detail:
          $ref: 'https://raw.githubusercontent.com/pagopa/pn-external-registries/b3cbe5b1f9cdb4af800355f780414fd02412fde8/docs/openapi/pn-payment-info-internal-v1.yaml#/components/schemas/Detail'
        detail_v2:
          $ref: 'https://raw.githubusercontent.com/pagopa/pn-external-registries/b3cbe5b1f9cdb4af800355f780414fd02412fde8/docs/openapi/pn-payment-info-internal-v1.yaml#/components/schemas/DetailV2'
        errorCode:
          description: error code to show at the user
          type: string
        amount:
          description: Amount for required payment in euro-cents
          type: integer
        causaleVersamento:
          description: reason for payment
          type: string
        dueDate:
          description: payment expiration date
          type: string
          pattern: ([0-9]{4})-(1[0-2]|0[1-9])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])

    BffPaymentRequest:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-external-registries/b3cbe5b1f9cdb4af800355f780414fd02412fde8/docs/openapi/pn-payment-info-internal-v1.yaml#/components/schemas/PaymentRequest'

    BffPaymentResponse:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-external-registries/b3cbe5b1f9cdb4af800355f780414fd02412fde8/docs/openapi/pn-payment-info-internal-v1.yaml#/components/schemas/PaymentResponse'

    BffPaymentTppResponse:
      type: object
      description: "Payment URL"
      properties:
        paymentUrl:
          type: string
          description: "URL to the payment page"
      example:
        paymentUrl: "https://example.com/payment/123e4567-e89b-12d3-a456-426614174000?fiscalCode=1234567890&noticeNumber=302000100000019421"

  parameters:
    BffPaymentTppRetrievalId:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-emd-integration/bb35455e5c61ca2c3c1dff088d45a42dc897cb1b/docs/openapi/api-private.yaml#/components/parameters/retrievalId'
    BffPaymentTppNoticeCode:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-emd-integration/bb35455e5c61ca2c3c1dff088d45a42dc897cb1b/docs/openapi/api-private.yaml#/components/parameters/noticeCode'
    BffPaymentTppPaTaxId:
      $ref: 'https://raw.githubusercontent.com/pagopa/pn-emd-integration/bb35455e5c61ca2c3c1dff088d45a42dc897cb1b/docs/openapi/api-private.yaml#/components/parameters/paTaxId'